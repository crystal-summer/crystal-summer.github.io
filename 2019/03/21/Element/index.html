<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/bitbug_favicon32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/bitbug_favicon16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.bootcss.com/fancybox/3.5.7/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"crystalsummer.gitee.io","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":true},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":true,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>


  <script>
  (function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0f81ff2f.js","daovoice")
  daovoice('init', {
      app_id: "4b921942"
    }); 
  daovoice('update');
  </script>


  <meta property="og:type" content="article">
<meta property="og:title" content="Element">
<meta property="og:url" content="http://crystalsummer.gitee.io/2019/03/21/Element/index.html">
<meta property="og:site_name" content="Crystal&#39;s Blog">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2020/05/18/mqbKhCTkEvD5e4s.png">
<meta property="og:image" content="https://i.loli.net/2020/05/21/DVHFEjAiTg8oYZl.gif">
<meta property="og:image" content="https://i.loli.net/2020/05/21/W9qsDxy3PC2oj75.gif">
<meta property="og:image" content="https://i.loli.net/2020/05/21/qsevyQuzrgp9SGH.gif">
<meta property="og:image" content="https://i.loli.net/2020/10/23/MWehUDKJuIi3Yf7.gif">
<meta property="og:image" content="https://i.loli.net/2020/11/24/5D3iJonGMRmckYw.gif">
<meta property="og:image" content="https://i.loli.net/2021/11/23/foiAUlexzcsJYkZ.gif">
<meta property="og:image" content="https://s2.loli.net/2023/03/28/k3d6LtBuPN1RolW.gif">
<meta property="og:image" content="https://s2.loli.net/2023/03/28/Cjp9XLGUqeYusKw.gif">
<meta property="og:image" content="https://i.loli.net/2021/02/24/ajrsuq5gGdo6O1M.gif">
<meta property="og:image" content="https://s2.loli.net/2023/03/29/NyJuDaiYPV1noA4.gif">
<meta property="og:image" content="https://s2.loli.net/2023/03/28/Jx1cZDoyMsXFvI7.gif">
<meta property="article:published_time" content="2019-03-21T06:16:18.000Z">
<meta property="article:modified_time" content="2023-06-14T08:04:35.895Z">
<meta property="article:author" content="Crystal">
<meta property="article:tag" content="UI">
<meta property="article:tag" content="Element">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2020/05/18/mqbKhCTkEvD5e4s.png">

<link rel="canonical" href="http://crystalsummer.gitee.io/2019/03/21/Element/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Element | Crystal's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Crystal's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Crystal's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/crystal-summer" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://crystalsummer.gitee.io/2019/03/21/Element/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar2.png">
      <meta itemprop="name" content="Crystal">
      <meta itemprop="description" content="Only for recording life">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Crystal's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Element
        </h1>

        <div class="post-meta">

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">posted</span>

              <time title="创建时间：2019-03-21 14:16:18" itemprop="dateCreated datePublished" datetime="2019-03-21T14:16:18+08:00">2019-03-21</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">in</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/UI/" itemprop="url" rel="index"><span itemprop="name">UI</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/UI/Element/" itemprop="url" rel="index"><span itemprop="name">Element</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="count">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">count：</span>
              <span>37k</span>
            </span>
            <span class="post-meta-item" title="readingTime">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">readingTime &asymp;</span>
              <span>34 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><img src="https://i.loli.net/2020/05/18/mqbKhCTkEvD5e4s.png" alt=""></p>
<a id="more"></a>
<p><a href="https://element.eleme.cn/#/zh-CN" target="_blank" rel="noopener"><strong>Element</strong></a>，一套为开发者、设计师和产品经理准备的基于 Vue 2.0 的桌面端组件库。这里记录了工作中遇到的常用操作。</p>
<h1 id="走马灯：多个幻灯片循环展示多个数据"><a href="#走马灯：多个幻灯片循环展示多个数据" class="headerlink" title="走马灯：多个幻灯片循环展示多个数据"></a>走马灯：多个幻灯片循环展示多个数据</h1><p><img src="https://i.loli.net/2020/05/21/DVHFEjAiTg8oYZl.gif" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">数据：</span><br><span class="line">muIndexOption &#x3D; [</span><br><span class="line">    &#123;&quot;name&quot;:&quot;亩均税收&quot;,&quot;unit&quot;:&quot;万元&#x2F;亩&quot;,&quot;key&quot;:&quot;muPerTax&quot;,&quot;id&quot;:1,&quot;value&quot;:67.19,&quot;lastValue&quot;:12.46,&quot;ratio&quot;:&quot;439.25%&quot;,&quot;level&quot;:&quot;up&quot;&#125;,</span><br><span class="line">    &#123;&quot;name&quot;:&quot;亩均销售&quot;,&quot;unit&quot;:&quot;万元&#x2F;亩&quot;,&quot;key&quot;:&quot;muPerSaleTax&quot;,&quot;id&quot;:11,&quot;value&quot;:2056.41,&quot;lastValue&quot;:325.79,&quot;ratio&quot;:&quot;531.21%&quot;,&quot;level&quot;:&quot;up&quot;&#125;,</span><br><span class="line">    &#123;&quot;name&quot;:&quot;亩均增加值&quot;,&quot;unit&quot;:&quot;万元&#x2F;亩&quot;,&quot;key&quot;:&quot;muIndustryAddValue&quot;,&quot;id&quot;:2,&quot;value&quot;:588.45,&quot;lastValue&quot;:51.13,&quot;ratio&quot;:&quot;1050.89%&quot;,&quot;level&quot;:&quot;up&quot;&#125;,</span><br><span class="line">    &#123;&quot;name&quot;:&quot;单位能耗增加值&quot;,&quot;unit&quot;:&quot;万元&#x2F;吨标煤&quot;,&quot;key&quot;:&quot;consumeAdd&quot;,&quot;id&quot;:3,&quot;value&quot;:37.84,&quot;lastValue&quot;:1.49,&quot;ratio&quot;:&quot;2439.60%&quot;,&quot;level&quot;:&quot;up&quot;&#125;,</span><br><span class="line">    &#123;&quot;name&quot;:&quot;单位排放增加值&quot;,&quot;unit&quot;:&quot;万元&#x2F;吨&quot;,&quot;key&quot;:&quot;blowdownAdd&quot;,&quot;id&quot;:4,&quot;value&quot;:36623.81,&quot;lastValue&quot;:1038.88,&quot;ratio&quot;:&quot;3425.32%&quot;,&quot;level&quot;:&quot;up&quot;&#125;,</span><br><span class="line">    &#123;&quot;name&quot;:&quot;全员劳动生产率&quot;,&quot;unit&quot;:&quot;万元&#x2F;人·年&quot;,&quot;key&quot;:&quot;allWorkRate&quot;,&quot;id&quot;:6,&quot;value&quot;:19.67,&quot;lastValue&quot;:19.83,&quot;ratio&quot;:&quot;0.81%&quot;,&quot;level&quot;:&quot;down&quot;&#125;,</span><br><span class="line">    &#123;&quot;name&quot;:&quot;R&amp;D经费支出占比&quot;,&quot;unit&quot;:&quot;%&quot;,&quot;key&quot;:&quot;researchRate&quot;,&quot;id&quot;:5,&quot;value&quot;:2.96,&quot;lastValue&quot;:1.89,&quot;ratio&quot;:&quot;56.61%&quot;,&quot;level&quot;:&quot;up&quot;&#125;,</span><br><span class="line">    &#123;&quot;name&quot;:&quot;优秀人才当量密度&quot;,&quot;unit&quot;:&quot;%&quot;,&quot;key&quot;:&quot;people&quot;,&quot;id&quot;:10,&quot;value&quot;:24.48,&quot;lastValue&quot;:29.81,&quot;ratio&quot;:&quot;17.88%&quot;,&quot;level&quot;:&quot;down&quot;&#125;,</span><br><span class="line">    &#123;&quot;name&quot;:&quot;单位电耗税收&quot;,&quot;unit&quot;:&quot;万元&#x2F;万千瓦时&quot;,&quot;key&quot;:&quot;eleTax&quot;,&quot;id&quot;:12,&quot;value&quot;:0,&quot;lastValue&quot;:7.9,&quot;ratio&quot;:&quot;100.00%&quot;,&quot;level&quot;:&quot;down&quot;&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>写法分析：</p>
<ol>
<li>图中只有2个幻灯片，所以 el-carousel-item 的循环是1,2即可，即 v-for=&#39; item in 2 &#39;；</li>
<li>每个幻灯片中有6个div块，样式一致，只是具体的数值不同，找到规律取对 muIndexOption 数组里面的数据即可；<br>数幻灯片第一笔数据：muIndexOption[6 * item-6]    数幻灯片第二笔数据：muIndexOption[6 * item-5]<br>数幻灯片第三笔数据：muIndexOption[6 * item-4]    数幻灯片第四笔数据：muIndexOption[6 * item-3]<br>数幻灯片第五笔数据：muIndexOption[6 * item-2]    数幻灯片第六笔数据：muIndexOption[6 * item-1]</li>
<li>最后一个幻灯片不确定可以展示几笔数据，如果只有一笔的话，那么就会因为取不到数据控制台报错，所以需要在每个展示数据的div块上写上 v-if=&#39; 6 * item- ? &lt; muIndexOption.length &#39;。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-carousel class&#x3D;&#39;visual-main-div&#39;&gt;</span><br><span class="line">    &lt;el-carousel-item v-for&#x3D;&quot;item in 2&quot; :key&#x3D;&quot;item&quot;&gt;</span><br><span class="line">        &lt;div class&#x3D;&#39;muIndex-container&#39;&gt;</span><br><span class="line">            &lt;div class&#x3D;&#39;muIndex-carousel&#39;&gt;</span><br><span class="line">                &lt;div class&#x3D;&#39;munindex-name&#39;&gt;&lt;div&gt;&lt;&#x2F;div&gt;&#123;&#123;muIndexOption[6*item-6].name+&#39;(&#39;+muIndexOption[6*item-6].unit+&#39;)&#39;&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">                &lt;div class&#x3D;&#39;munindex-value&#39;&gt;</span><br><span class="line">                    &lt;div&gt;&#123;&#123;muIndexOption[6*item-6].value&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">                    &lt;div&gt;&#123;&#123;muIndexOption[6*item-6].ratio&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">                    &lt;div&gt;</span><br><span class="line">                        &lt;i class&#x3D;&#39;iconfont&#39; :class&#x3D;&quot;muIndexOption[6*item-6].level&#x3D;&#x3D;&#39;equal&#39;?&#39;iconhengxian equal&#39;:(muIndexOption[6*item-6].level&#x3D;&#x3D;&#39;down&#39;?&#39;iconxiajiangjiantoux down&#39;:(muIndexOption[6*item-6].level&#x3D;&#x3D;&#39;up&#39;?&#39;iconshangshengjiantoux up&#39;:&#39;&#39;))&quot;&gt;&lt;&#x2F;i&gt;</span><br><span class="line">                    &lt;&#x2F;div&gt;</span><br><span class="line">                &lt;&#x2F;div&gt;</span><br><span class="line">                &lt;div class&#x3D;&#39;munindex-lastValue&#39;&gt;去年同期&#123;&#123;muIndexOption[6*item-6].lastValue+muIndexOption[6*item-6].unit&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">            &lt;div class&#x3D;&#39;muIndex-carousel&#39;&gt;</span><br><span class="line">                &lt;div class&#x3D;&#39;munindex-name&#39;&gt;&lt;div&gt;&lt;&#x2F;div&gt;&#123;&#123;muIndexOption[6*item-5].name+&#39;(&#39;+muIndexOption[6*item-5].unit+&#39;)&#39;&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">                &lt;div class&#x3D;&#39;munindex-value&#39;&gt;</span><br><span class="line">                    &lt;div&gt;&#123;&#123;muIndexOption[6*item-5].value&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">                    &lt;div&gt;&#123;&#123;muIndexOption[6*item-5].ratio&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">                    &lt;div&gt;</span><br><span class="line">                        &lt;i class&#x3D;&#39;iconfont&#39; :class&#x3D;&quot;muIndexOption[6*item-5].level&#x3D;&#x3D;&#39;equal&#39;?&#39;iconhengxian equal&#39;:(muIndexOption[6*item-5].level&#x3D;&#x3D;&#39;down&#39;?&#39;iconxiajiangjiantoux down&#39;:(muIndexOption[6*item-5].level&#x3D;&#x3D;&#39;up&#39;?&#39;iconshangshengjiantoux up&#39;:&#39;&#39;))&quot;&gt;&lt;&#x2F;i&gt;</span><br><span class="line">                    &lt;&#x2F;div&gt;</span><br><span class="line">                &lt;&#x2F;div&gt;</span><br><span class="line">                &lt;div class&#x3D;&#39;munindex-lastValue&#39;&gt;去年同期&#123;&#123;muIndexOption[6*item-5].lastValue+muIndexOption[6*item-5].unit&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">            &lt;div class&#x3D;&#39;muIndex-carousel&#39; v-if&#x3D;&#39;6*item-4&lt;muIndexOption.length&#39;&gt;</span><br><span class="line">                &lt;div class&#x3D;&#39;munindex-name&#39;&gt;&lt;div&gt;&lt;&#x2F;div&gt;&#123;&#123;muIndexOption[6*item-4].name+&#39;(&#39;+muIndexOption[6*item-4].unit+&#39;)&#39;&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">                &lt;div class&#x3D;&#39;munindex-value&#39;&gt;</span><br><span class="line">                    &lt;div&gt;&#123;&#123;muIndexOption[6*item-4].value&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">                    &lt;div&gt;&#123;&#123;muIndexOption[6*item-4].ratio&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">                    &lt;div&gt;</span><br><span class="line">                        &lt;i class&#x3D;&#39;iconfont&#39; :class&#x3D;&quot;muIndexOption[6*item-4].level&#x3D;&#x3D;&#39;equal&#39;?&#39;iconhengxian equal&#39;:(muIndexOption[6*item-4].level&#x3D;&#x3D;&#39;down&#39;?&#39;iconxiajiangjiantoux down&#39;:(muIndexOption[6*item-4].level&#x3D;&#x3D;&#39;up&#39;?&#39;iconshangshengjiantoux up&#39;:&#39;&#39;))&quot;&gt;&lt;&#x2F;i&gt;</span><br><span class="line">                    &lt;&#x2F;div&gt;</span><br><span class="line">                &lt;&#x2F;div&gt;</span><br><span class="line">                &lt;div class&#x3D;&#39;munindex-lastValue&#39;&gt;去年同期&#123;&#123;muIndexOption[6*item-4].lastValue+muIndexOption[6*item-4].unit&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">            &lt;div class&#x3D;&#39;muIndex-carousel&#39; v-if&#x3D;&#39;6*item-3&lt;muIndexOption.length&#39;&gt;</span><br><span class="line">                &lt;div class&#x3D;&#39;munindex-name&#39;&gt;&lt;div&gt;&lt;&#x2F;div&gt;&#123;&#123;muIndexOption[6*item-3].name+&#39;(&#39;+muIndexOption[6*item-3].unit+&#39;)&#39;&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">                &lt;div class&#x3D;&#39;munindex-value&#39;&gt;</span><br><span class="line">                    &lt;div&gt;&#123;&#123;muIndexOption[6*item-3].value&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">                    &lt;div&gt;&#123;&#123;muIndexOption[6*item-3].ratio&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">                    &lt;div&gt;</span><br><span class="line">                        &lt;i class&#x3D;&#39;iconfont&#39; :class&#x3D;&quot;muIndexOption[6*item-3].level&#x3D;&#x3D;&#39;equal&#39;?&#39;iconhengxian equal&#39;:(muIndexOption[6*item-3].level&#x3D;&#x3D;&#39;down&#39;?&#39;iconxiajiangjiantoux down&#39;:(muIndexOption[6*item-3].level&#x3D;&#x3D;&#39;up&#39;?&#39;iconshangshengjiantoux up&#39;:&#39;&#39;))&quot;&gt;&lt;&#x2F;i&gt;</span><br><span class="line">                    &lt;&#x2F;div&gt;</span><br><span class="line">                &lt;&#x2F;div&gt;</span><br><span class="line">                &lt;div class&#x3D;&#39;munindex-lastValue&#39;&gt;去年同期&#123;&#123;muIndexOption[6*item-3].lastValue+muIndexOption[6*item-3].unit&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">            &lt;div class&#x3D;&#39;muIndex-carousel&#39; v-if&#x3D;&#39;6*item-2&lt;muIndexOption.length&#39;&gt;</span><br><span class="line">                &lt;div class&#x3D;&#39;munindex-name&#39;&gt;&lt;div&gt;&lt;&#x2F;div&gt;&#123;&#123;muIndexOption[6*item-2].name+&#39;(&#39;+muIndexOption[6*item-2].unit+&#39;)&#39;&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">                &lt;div class&#x3D;&#39;munindex-value&#39;&gt;</span><br><span class="line">                    &lt;div&gt;&#123;&#123;muIndexOption[6*item-2].value&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">                    &lt;div&gt;&#123;&#123;muIndexOption[6*item-2].ratio&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">                    &lt;div&gt;</span><br><span class="line">                        &lt;i class&#x3D;&#39;iconfont&#39; :class&#x3D;&quot;muIndexOption[6*item-2].level&#x3D;&#x3D;&#39;equal&#39;?&#39;iconhengxian equal&#39;:(muIndexOption[6*item-2].level&#x3D;&#x3D;&#39;down&#39;?&#39;iconxiajiangjiantoux down&#39;:(muIndexOption[6*item-2].level&#x3D;&#x3D;&#39;up&#39;?&#39;iconshangshengjiantoux up&#39;:&#39;&#39;))&quot;&gt;&lt;&#x2F;i&gt;</span><br><span class="line">                    &lt;&#x2F;div&gt;</span><br><span class="line">                &lt;&#x2F;div&gt;</span><br><span class="line">                &lt;div class&#x3D;&#39;munindex-lastValue&#39;&gt;去年同期&#123;&#123;muIndexOption[6*item-2].lastValue+muIndexOption[6*item-2].unit&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">            &lt;div class&#x3D;&#39;muIndex-carousel&#39; v-if&#x3D;&#39;6*item-1&lt;muIndexOption.length&#39;&gt;</span><br><span class="line">                &lt;div class&#x3D;&#39;munindex-name&#39;&gt;&lt;div&gt;&lt;&#x2F;div&gt;&#123;&#123;muIndexOption[6*item-1].name+&#39;(&#39;+muIndexOption[6*item-1].unit+&#39;)&#39;&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">                &lt;div class&#x3D;&#39;munindex-value&#39;&gt;</span><br><span class="line">                    &lt;div&gt;&#123;&#123;muIndexOption[6*item-1].value&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">                    &lt;div&gt;&#123;&#123;muIndexOption[6*item-1].ratio&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">                    &lt;div&gt;</span><br><span class="line">                        &lt;i class&#x3D;&#39;iconfont&#39; :class&#x3D;&quot;muIndexOption[6*item-1].level&#x3D;&#x3D;&#39;equal&#39;?&#39;iconhengxian equal&#39;:(muIndexOption[6*item-1].level&#x3D;&#x3D;&#39;down&#39;?&#39;iconxiajiangjiantoux down&#39;:(muIndexOption[6*item-1].level&#x3D;&#x3D;&#39;up&#39;?&#39;iconshangshengjiantoux up&#39;:&#39;&#39;))&quot;&gt;&lt;&#x2F;i&gt;</span><br><span class="line">                    &lt;&#x2F;div&gt;</span><br><span class="line">                &lt;&#x2F;div&gt;</span><br><span class="line">                &lt;div class&#x3D;&#39;munindex-lastValue&#39;&gt;去年同期&#123;&#123;muIndexOption[6*item-1].lastValue+muIndexOption[6*item-1].unit&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;el-carousel-item&gt;</span><br><span class="line">&lt;&#x2F;el-carousel&gt;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="自动搜索"><a href="#自动搜索" class="headerlink" title="自动搜索"></a>自动搜索</h1><p><img src="https://i.loli.net/2020/05/21/W9qsDxy3PC2oj75.gif" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"> &lt;el-autocomplete class&#x3D;&quot;inline-input&quot; v-model&#x3D;&quot;ruleForm.lessor&quot; placeholder&#x3D;&quot;请输入出租方&quot; value-key&#x3D;&quot;entName&quot;</span><br><span class="line">    :fetch-suggestions&#x3D;&quot;querySearch&quot; :trigger-on-focus&#x3D;&quot;false&quot; @select&#x3D;&quot;handleSelect&quot; &gt;&lt;&#x2F;el-autocomplete&gt;</span><br><span class="line">&#x2F;&#x2F;模糊查询</span><br><span class="line">querySearch(query,cb)&#123;</span><br><span class="line">    if (query !&#x3D; &quot;&quot;) &#123;</span><br><span class="line">        &#x2F;&#x2F; 调用接口获取数据</span><br><span class="line">        selectEntName(&#123; entName: query &#125;).then(res &#x3D;&gt; &#123;</span><br><span class="line">            if (res.code &#x3D;&#x3D; &quot;0000&quot;) &#123;</span><br><span class="line">                cb(res.data);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                this.$message.error(res.msg || &quot;获取企业数据失败&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">handleSelect(item)&#123;</span><br><span class="line">    this.ruleForm.lessorCreditCode &#x3D; item.creditCode;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h1 id="级联选择器"><a href="#级联选择器" class="headerlink" title="级联选择器"></a>级联选择器</h1><h2 id="动态加载"><a href="#动态加载" class="headerlink" title="动态加载"></a>动态加载</h2><p><img src="https://i.loli.net/2020/05/21/qsevyQuzrgp9SGH.gif" alt="lazyout.gif"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">data()&#123;</span><br><span class="line">    let that &#x3D; this;</span><br><span class="line">    return &#123;</span><br><span class="line">        &#x2F;&#x2F;1.设置在props设置lazy和lazyLoad属性</span><br><span class="line">        addProps: &#123;</span><br><span class="line">            lazy: true,</span><br><span class="line">            value: &quot;code&quot;,</span><br><span class="line">            children: &quot;childList&quot;,</span><br><span class="line">            label: &quot;name&quot;,</span><br><span class="line">            lazyLoad(node, resolve) &#123;</span><br><span class="line">                const &#123; level &#125; &#x3D; node;</span><br><span class="line">                if (level &#x3D;&#x3D;&#x3D; 0) &#123;&#x2F;&#x2F;一级</span><br><span class="line">                    that.queryRegions(0, resolve) </span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    that.queryRegions(node, resolve);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;	</span><br><span class="line">&#125;</span><br><span class="line">methods:()&#123;</span><br><span class="line">    &#x2F;&#x2F; 调用后台接口，根据父级的code获取子集，若是第一级parentCode传0 </span><br><span class="line">    queryRegions(node, resolve) &#123;</span><br><span class="line">        let parentCode &#x3D; node ? node.data.code : 0;</span><br><span class="line">        queryRegions(&#123; parentCode &#125;).then(res &#x3D;&gt; &#123;</span><br><span class="line">            let &#123; code, data &#125; &#x3D; res.data;</span><br><span class="line">            if (code &#x3D;&#x3D; &quot;000000&quot; &amp;&amp; data) &#123;</span><br><span class="line">                resolve(data);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                resolve([]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="单选模式加动态加载"><a href="#单选模式加动态加载" class="headerlink" title="单选模式加动态加载"></a>单选模式加动态加载</h2><p><img src="https://i.loli.net/2020/10/23/MWehUDKJuIi3Yf7.gif" alt="singnal-lazyout.gif"><br>　　级联选择器在动态加载的情况下，只能选择最后一级的数据，但是现在需求是任一级数据都可以选择，所以需要加上单选模式，但是在单选模式加动态加载模式下，选择单选按钮可以选中数据但不会动态加载下一级数据，点击当前数据和&gt;箭头可以动态加载下一级数据但是不能选中当前数据，为了解决这个问题，做出以下修改：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-cascader </span><br><span class="line">    v-model&#x3D;&quot;groupItem.areaCode&quot; </span><br><span class="line">    :show-all-levels&#x3D;&quot;false&quot; </span><br><span class="line">    :props&#x3D;&quot;addProps&quot; </span><br><span class="line">    clearable </span><br><span class="line">    @visible-change&#x3D;&quot;elCascaderOnlick&quot; </span><br><span class="line">    @expand-change&#x3D;&quot;elCascaderOnlick&quot;&gt;</span><br><span class="line">        &lt;template slot-scope&#x3D;&quot;&#123; node, data &#125;&quot;&gt;</span><br><span class="line">            &lt;span&gt;&#123;&#123; data.name &#125;&#125;&lt;&#x2F;span&gt;</span><br><span class="line">        &lt;&#x2F;template&gt;</span><br><span class="line">&lt;&#x2F;el-cascader&gt;</span><br><span class="line"></span><br><span class="line">addProps: &#123;</span><br><span class="line">    lazy: true,</span><br><span class="line">    value: &#39;code&#39;,</span><br><span class="line">    children: &#39;childList&#39;,</span><br><span class="line">    emitPath: false,</span><br><span class="line">    label: &#39;code&#39;,</span><br><span class="line">    checkStrictly: true,</span><br><span class="line">    lazyLoad(node, resolve) &#123;</span><br><span class="line">        const &#123; level &#125; &#x3D; node</span><br><span class="line">        if (level &#x3D;&#x3D;&#x3D; 0) &#123;</span><br><span class="line">            &#x2F;&#x2F; 一级</span><br><span class="line">            that.queryRegions(0, resolve)</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            that.queryRegions(node, resolve)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 动态加载行政代码</span><br><span class="line">queryRegions(node, resolve) &#123;</span><br><span class="line">    let parentCode &#x3D; node ? node.data.code : 0</span><br><span class="line">    queryRegions(&#123; parentCode &#125;).then(res &#x3D;&gt; &#123;</span><br><span class="line">        let &#123; code, data &#125; &#x3D; res.data</span><br><span class="line">        if (code &#x3D;&#x3D; &#39;000000&#39; &amp;&amp; data) &#123;</span><br><span class="line">            resolve(data)</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            resolve([])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br><span class="line">&#x2F;&#x2F; 解决 单选 + 动态加载 存在的问题</span><br><span class="line">elCascaderOnlick(leafOnly) &#123;</span><br><span class="line">    let that &#x3D; this</span><br><span class="line">    setTimeout(function() &#123;</span><br><span class="line">        &#x2F;&#x2F; 点击当前数据，触发前一个元素（单选按钮）的点击事件</span><br><span class="line">        document.querySelectorAll(&#39;.el-cascader-node__label&#39;).forEach(el &#x3D;&gt; &#123;</span><br><span class="line">            el.onclick &#x3D; function() &#123;</span><br><span class="line">                this.previousElementSibling.click()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        &#x2F;&#x2F; 点击单选按钮，触发下一个元素（当前数据label）的点击事件</span><br><span class="line">        document.querySelectorAll(&#39;.el-radio&#39;).forEach(el &#x3D;&gt; &#123;</span><br><span class="line">            el.onclick &#x3D; function() &#123;</span><br><span class="line">                this.nextElementSibling.click()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;, 100)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="上传"><a href="#上传" class="headerlink" title="上传"></a>上传</h1><h2 id="限制上传图片的宽高"><a href="#限制上传图片的宽高" class="headerlink" title="限制上传图片的宽高"></a>限制上传图片的宽高</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * 限制图片上传尺寸</span><br><span class="line"> * 图片宽大于550像素，高大于350像素，高在宽的1&#x2F;2到3&#x2F;4范围内</span><br><span class="line"> * 入参 that 是将 vue 对象绑定的element-ui传入</span><br><span class="line"> *&#x2F;</span><br><span class="line">export function ruleImgSize(that,file)&#123;</span><br><span class="line">  let supportFormat &#x3D; [&#39;jpg&#39;, &#39;jpeg&#39;, &#39;png&#39;, &#39;gif&#39;]</span><br><span class="line">  if (supportFormat.indexOf(file.type.split(&#39;&#x2F;&#39;)[1]) &#x3D;&#x3D; -1) &#123;</span><br><span class="line">    that.$message.warning(&#39;上传文件的格式不合符，请重新上传！&#39;)</span><br><span class="line">    return false &#x2F;&#x2F;必须加上return false; 才能阻止上传</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    &#x2F;&#x2F; 图片文件大小限制，限制宽高</span><br><span class="line">    let imgWidth &#x3D; &#39;&#39;</span><br><span class="line">    let imgHight &#x3D; &#39;&#39;</span><br><span class="line">    const isSize &#x3D; new Promise(function(resolve, reject) &#123;</span><br><span class="line">      let _URL &#x3D; window.URL || window.webkitURL</span><br><span class="line">      let img &#x3D; new Image()</span><br><span class="line">      img.onload &#x3D; function() &#123;</span><br><span class="line">        imgWidth &#x3D; img.width</span><br><span class="line">        imgHight &#x3D; img.height</span><br><span class="line">        let valid</span><br><span class="line">        if (imgWidth &lt; 550 || imgHight &lt; 350 || imgHight &gt; (3 * imgWidth) &#x2F; 4 || imgHight &lt; imgWidth &#x2F; 3) &#123;</span><br><span class="line">          valid &#x3D; false</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          valid &#x3D; true</span><br><span class="line">        &#125;</span><br><span class="line">        valid ? resolve() : reject()</span><br><span class="line">      &#125;</span><br><span class="line">      img.src &#x3D; _URL.createObjectURL(file)</span><br><span class="line">    &#125;).then(() &#x3D;&gt; &#123;</span><br><span class="line">      return file</span><br><span class="line">    &#125;, () &#x3D;&gt; &#123;</span><br><span class="line">      that.$message.warning(&#123; message: &#39;上传文件的图片大小不合符标准,图片宽大于550像素，高大于350像素，高在宽的1&#x2F;2到3&#x2F;4范围内。当前上传图片的宽高分别为：&#39; + imgWidth + &#39;像素和&#39; + imgHight + &#39;像素&#39;, btn: false &#125;)</span><br><span class="line">      return Promise.reject()</span><br><span class="line">    &#125;)</span><br><span class="line">    return isSize</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 使用：在el-upload上绑定before-upload事件</span><br><span class="line">imgBeforeUpload(file) &#123;</span><br><span class="line">    return ruleImgSize(this, file)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="表单"><a href="#表单" class="headerlink" title="表单"></a>表单</h1><h2 id="动态增减表单项"><a href="#动态增减表单项" class="headerlink" title="动态增减表单项"></a>动态增减表单项</h2><p><img src="https://i.loli.net/2020/11/24/5D3iJonGMRmckYw.gif" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-form ref&#x3D;&quot;infoForm&quot; :model&#x3D;&quot;infoForm&quot; label-width&#x3D;&quot;180px&quot;  :rules&#x3D;&quot;infoRules&quot;&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;info-common&quot;&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;info-common-title&quot;&gt;企业用地数据&lt;&#x2F;div&gt;</span><br><span class="line">            &lt;div class&#x3D;&quot;info-common-subtitle&quot;&gt;实际用地面积&lt;&#x2F;div&gt;</span><br><span class="line">            &lt;div class&#x3D;&quot;info-common-body flx&quot;&gt;</span><br><span class="line">                &lt;el-form-item label&#x3D;&quot;实际用地面积（亩）&quot;&gt;</span><br><span class="line">                    &lt;el-input v-model&#x3D;&quot;actualLandArea&quot; placeholder&#x3D;&quot;请输入实际用地面积&quot; disabled&gt;&lt;&#x2F;el-input&gt;</span><br><span class="line">                &lt;&#x2F;el-form-item&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">            &lt;div class&#x3D;&quot;info-common-subtitle&quot;&gt;</span><br><span class="line">                土地证载面积</span><br><span class="line">                &lt;span class&#x3D;&quot;add&quot; @click&#x3D;&quot;addLand&quot;&gt;&lt;i class&#x3D;&quot;el-icon-plus&quot; &gt;&lt;&#x2F;i&gt;添加&lt;&#x2F;span&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">            &lt;div class&#x3D;&quot;info-common-body&quot; v-if&#x3D;&quot;infoForm.landDataList &amp;&amp; infoForm.landDataList.length&gt;0&quot;&gt;</span><br><span class="line">                &lt;div v-for&#x3D;&quot;(item,index) in infoForm.landDataList&quot; :key&#x3D;&#39;index&#39; class&#x3D;&quot;item&quot;&gt;</span><br><span class="line">                    &lt;div class&#x3D;&quot;item-title&quot;&gt;土地证载面积&#123;&#123;index+1&#125;&#125;&lt;i class&#x3D;&quot;el-icon-delete&quot; @click&#x3D;&quot;delLand(item)&quot;&gt;&lt;&#x2F;i&gt;&lt;&#x2F;div&gt;</span><br><span class="line">                    &lt;div class&#x3D;&quot;flx&quot;&gt;</span><br><span class="line">                        &lt;el-form-item</span><br><span class="line">                            label&#x3D;&quot;土地字号&quot;</span><br><span class="line">                            :prop&#x3D;&quot;&#39;landDataList.&#39; + index + &#39;.landNumber&#39;&quot;</span><br><span class="line">                            :key&#x3D;&quot;item.key+&#39;1&#39;&quot;</span><br><span class="line">                            :rules&#x3D;&quot;&#123;</span><br><span class="line">                                required: true, message: &#39;请输入土地字号&#39;, trigger: &#39;blur&#39;</span><br><span class="line">                            &#125;&quot;&gt;</span><br><span class="line">                            &lt;el-input placeholder&#x3D;&quot;请输入土地字号&quot; v-model&#x3D;&quot;item.landNumber&quot;&gt;&lt;&#x2F;el-input&gt;</span><br><span class="line">                        &lt;&#x2F;el-form-item&gt;</span><br><span class="line">                        &lt;el-form-item</span><br><span class="line">                            label&#x3D;&quot;土地使用权面积(平方米)&quot;</span><br><span class="line">                            :prop&#x3D;&quot;&#39;landDataList.&#39; + index + &#39;.landUseArea&#39;&quot;</span><br><span class="line">                            :key&#x3D;&quot;item.key+&#39;2&#39;&quot;</span><br><span class="line">                            :rules&#x3D;&quot;[&#123;</span><br><span class="line">                                required: true, message: &#39;请输入土地使用权面积&#39;, trigger: &#39;blur&#39;</span><br><span class="line">                            &#125;,&#123; pattern: &#x2F;^\d&#123;1,6&#125;$|^\d&#123;1,6&#125;[.]\d&#123;1,6&#125;$&#x2F;, message: &#96;必须为数字,整数最多6位，小数最多6位&#96;, trigger: &#39;blur&#39; &#125;]&quot;&gt;</span><br><span class="line">                            &lt;el-input placeholder&#x3D;&quot;请输入土地使用权面积&quot; v-model&#x3D;&quot;item.landUseArea&quot;&gt;&lt;&#x2F;el-input&gt;</span><br><span class="line">                        &lt;&#x2F;el-form-item&gt;</span><br><span class="line">                        &lt;el-form-item</span><br><span class="line">                            label&#x3D;&quot;土地使用权面积(亩)&quot;</span><br><span class="line">                            :prop&#x3D;&quot;&#39;landDataList.&#39; + index + &#39;.landUseAreaMu&#39;&quot;</span><br><span class="line">                            :key&#x3D;&quot;item.key+&#39;3&#39;&quot;&gt;</span><br><span class="line">                            &lt;el-input placeholder&#x3D;&quot;请输入土地使用权面积&quot; v-model&#x3D;&quot;item.landUseAreaMu&quot; disabled&gt;&lt;&#x2F;el-input&gt;</span><br><span class="line">                        &lt;&#x2F;el-form-item&gt;</span><br><span class="line">                        &lt;el-form-item</span><br><span class="line">                            label&#x3D;&quot;不动产权证号&quot;</span><br><span class="line">                            :prop&#x3D;&quot;&#39;landDataList.&#39; + index + &#39;.realPropertyNumber&#39;&quot;</span><br><span class="line">                            :key&#x3D;&quot;item.key+&#39;4&#39;&quot;</span><br><span class="line">                            :rules&#x3D;&quot;&#123;</span><br><span class="line">                                required: true, message: &#39;请输入不动产权证号&#39;, trigger: &#39;blur&#39;</span><br><span class="line">                            &#125;&quot;&gt;</span><br><span class="line">                            &lt;el-input placeholder&#x3D;&quot;请输入不动产权证号&quot; v-model&#x3D;&quot;item.realPropertyNumber&quot;&gt;&lt;&#x2F;el-input&gt;</span><br><span class="line">                        &lt;&#x2F;el-form-item&gt;</span><br><span class="line">                        &lt;el-form-item</span><br><span class="line">                            label&#x3D;&quot;供地日期&quot;</span><br><span class="line">                            :prop&#x3D;&quot;&#39;landDataList.&#39; + index + &#39;.landSupply&#39;&quot;</span><br><span class="line">                            :key&#x3D;&quot;item.key+&#39;5&#39;&quot;</span><br><span class="line">                            :rules&#x3D;&quot;&#123;</span><br><span class="line">                                required: true, message: &#39;请选择供地日期&#39;, trigger: &#39;blur&#39;</span><br><span class="line">                            &#125;&quot;&gt;</span><br><span class="line">                            &lt;el-date-picker v-model&#x3D;&quot;item.landSupply&quot; type&#x3D;&quot;date&quot; placeholder&#x3D;&quot;请选择供地日期&quot; value-format&#x3D;&#39;yyyy-MM-dd&#39;&gt;&lt;&#x2F;el-date-picker&gt;</span><br><span class="line">                        &lt;&#x2F;el-form-item&gt;</span><br><span class="line">                    &lt;&#x2F;div&gt;</span><br><span class="line">                &lt;&#x2F;div&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">            &lt;div class&#x3D;&quot;noData&quot; v-else&gt;</span><br><span class="line">                &lt;div class&#x3D;&quot;noData-img&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;el-form&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 新增土地证载面积</span><br><span class="line">addLand() &#123;</span><br><span class="line">    this.infoForm.landDataList.push(&#123;</span><br><span class="line">        landNumber: null,</span><br><span class="line">        landUseArea: null,</span><br><span class="line">        landUseAreaMu: this.landUseArea ? (this.landUseArea * 0.0015).toFixed(6) : null,</span><br><span class="line">        realPropertyNumber: null,</span><br><span class="line">        landSupply: null,</span><br><span class="line">        key: Date.now()</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br><span class="line">&#x2F;&#x2F; 删除土地证载面积</span><br><span class="line">delLand(item) &#123;</span><br><span class="line">    var index &#x3D; this.infoForm.landDataList.indexOf(item)</span><br><span class="line">    if (index !&#x3D;&#x3D; -1) &#123;</span><br><span class="line">        this.infoForm.landDataList.splice(index, 1)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="表单校验报错但不影响提交"><a href="#表单校验报错但不影响提交" class="headerlink" title="表单校验报错但不影响提交"></a>表单校验报错但不影响提交</h2><p>　　最近有个项目，在填写表单的厂房面积字段时，需要和出租方填写的登记用地面积总量进行比对，<strong>如果承租厂房面积大于出租方填写的登记用地面积总量，要给出错误提示，但是依然可以提交。</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; areaOfInPlant-承租厂房面积 currentTotalLand-出租方填写的登记用地面积总量</span><br><span class="line">&lt;el-form&gt;</span><br><span class="line">    &lt;el-form-item label&#x3D;&quot;承租厂房面积(亩)&quot; prop&#x3D;&quot;areaOfInPlant&quot;&gt;</span><br><span class="line">        &lt;el-input v-model&#x3D;&quot;ruleForm.areaOfInPlant&quot; placeholder&#x3D;&quot;请输入承租厂房面积&quot;&gt;&lt;&#x2F;el-input&gt;</span><br><span class="line">        &#x2F;&#x2F; 在这里进行判断，给div加上el-form-item__error的class即可</span><br><span class="line">        &lt;div v-if&#x3D;&quot;ruleForm.areaOfInPlant&gt;currentTotalLand&quot; class&#x3D;&quot;el-form-item__error&quot;&gt;承租厂房面积大于出租方填写的登记用地面积总量&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;el-form-item&gt;</span><br><span class="line">&lt;&#x2F;el-form&gt;</span><br></pre></td></tr></table></figure>

<h1 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h1><h2 id="表格多选"><a href="#表格多选" class="headerlink" title="表格多选"></a>表格多选</h2><h3 id="默认选中某些多选框"><a href="#默认选中某些多选框" class="headerlink" title="默认选中某些多选框"></a>默认选中某些多选框</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; tableData-表格所有数据 res-获取到的勾选的数据的id数组</span><br><span class="line">&#x2F;&#x2F; 先清空所有的勾选状态</span><br><span class="line">this.$refs.multipleTable.clearSelection()</span><br><span class="line">if (res &amp;&amp; res.length &gt; 0) &#123;</span><br><span class="line">    &#x2F;&#x2F; 过滤出勾选的表格数据</span><br><span class="line">    let temp &#x3D; tableData.filter(cu &#x3D;&gt; &#123; return res.indexOf(cu.id) !&#x3D; -1 &#125;)</span><br><span class="line">    if (temp &amp;&amp; temp.length &gt; 0) &#123;</span><br><span class="line">        &#x2F;&#x2F; 默认选中这些数据的多选框</span><br><span class="line">        temp.forEach(row &#x3D;&gt; &#123;</span><br><span class="line">            this.$refs.multipleTable.toggleRowSelection(row)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="多选框disabled"><a href="#多选框disabled" class="headerlink" title="多选框disabled"></a>多选框disabled</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 多选框的列</span><br><span class="line">&lt;el-table-column type&#x3D;&quot;selection&quot;  width&#x3D;&quot;55&quot; :selectable&#x3D;&quot;selectable&quot;&gt;&lt;&#x2F;el-table-column&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 多选框disabled是根据selectable函数的返回值确定的</span><br><span class="line">selectable(row, index) &#123;</span><br><span class="line">    &#x2F;&#x2F; editFlag true-非disabled状态，可勾选 false-disabled状态</span><br><span class="line">    return editFlag</span><br><span class="line">    &#x2F;&#x2F; 这里可以根据row和index限制某些行多选框disabled</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><ol>
<li>表格行多选框disabled只针对行多选框，表头的多选框不受限制；</li>
<li>表格行多选框disabled之后，表头的全选多选框就会忽略掉disabled的行，如果将表格的所有行多选框disabled之后，不管行多选框有没有选中，表头的全选多选框都会是勾选的状态；</li>
<li>为了解决 2 的问题，我们一般在行多选框disabled时，将表头多选框隐藏掉，行多选框非disabled时，将表头多选框显示出来，<strong>显示出来的时候一定要再次走一遍默认选中多选框的操作，否则的话还是会出现2的情况。</strong></li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 给表头加class</span><br><span class="line">&lt;el-table :data&#x3D;&quot;tableData&quot; ref&#x3D;&quot;multipleTable&quot; :header-cell-class-name&#x3D;&quot;cellClass&quot;&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 表头多选框是否disabled</span><br><span class="line">cellClass(row) &#123;</span><br><span class="line">    if (row.columnIndex &#x3D;&#x3D;&#x3D; 0) &#123;</span><br><span class="line">        &#x2F;&#x2F; editFlag true-非disabled状态，可勾选,这个时候要显示表头多选框，所以不给class false-disabled状态，不展示表头多选框</span><br><span class="line">        return editFlag ? &#39;&#39; : &#39;DisableSelection&#39;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;deep&#x2F;.DisableSelection&#123;</span><br><span class="line">  .cell&#123;</span><br><span class="line">    display: none;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="表格编辑"><a href="#表格编辑" class="headerlink" title="表格编辑"></a>表格编辑</h2><p><img src="https://i.loli.net/2021/11/23/foiAUlexzcsJYkZ.gif" alt=""><br>&emsp;&emsp;获取到表格数据后，for 循环给表格新增 edit 属性，通过该属性来判断单元格是展示输入框还是展示文字。<br><strong>注意：</strong>vue只会监听表格数据的row有没有发生变化，row里面具体某个数据发生改变 vue 监听不到，所以在修改 edit 的状态，需要使用 <code>this.$set(this.tableData, index, row)</code> 来重新渲染表格。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; HTML</span><br><span class="line">&lt;el-table-column label&#x3D;&quot;排序&quot; align&#x3D;&quot;center&quot; min-width&#x3D;&quot;130&quot;&gt;</span><br><span class="line">    &lt;template slot-scope&#x3D;&quot;&#123;row,$index&#125;&quot;&gt;</span><br><span class="line">        &lt;div v-if&#x3D;&quot;row.edit&quot;&gt;</span><br><span class="line">            &lt;el-input-number v-model&#x3D;&quot;row.sort&quot; size&#x3D;&quot;mini&quot; :min&#x3D;&quot;1&quot; :precision&#x3D;&quot;0&quot; &#x2F;&gt;</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;el-button type&#x3D;&quot;text&quot; @click&#x3D;&quot;editShow(row,$index,false)&quot;&gt;取消&lt;&#x2F;el-button&gt;</span><br><span class="line">                &lt;el-button type&#x3D;&quot;text&quot; @click&#x3D;&quot;sortChange(row,$index)&quot;&gt;确定&lt;&#x2F;el-button&gt;</span><br><span class="line">            &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;div v-else&gt;</span><br><span class="line">            &#123;&#123; row.sort &#125;&#125;&lt;i class&#x3D;&quot;el-icon-edit&quot; @click&#x3D;&quot;editShow(row,$index,true)&quot; &#x2F;&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;template&gt;</span><br><span class="line">&lt;&#x2F;el-table-column&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; JS</span><br><span class="line">this.tableData.map(cu &#x3D;&gt; &#123; cu.edit &#x3D; false &#125;)</span><br><span class="line">&#x2F;&#x2F; 排序输入框显示切换 status:false-取消编辑 true-提交编辑</span><br><span class="line">editShow(row, index, status) &#123;</span><br><span class="line">    &#x2F;&#x2F; 先查看当前表格是否有在编辑中的状态，有的话不允许编辑其他项</span><br><span class="line">    const findindex &#x3D; this.tableData.findIndex(cu &#x3D;&gt; &#123; return cu.edit &#x3D;&#x3D;&#x3D; true &#125;)</span><br><span class="line">    if (findindex !&#x3D;&#x3D; -1 &amp;&amp; status) &#123;</span><br><span class="line">        this.$message.warning(&#39;请先保存之前的编辑项&#39;)</span><br><span class="line">        return false</span><br><span class="line">    &#125;</span><br><span class="line">    row.edit &#x3D; status</span><br><span class="line">    if (status) &#123; &#x2F;&#x2F; 保存当前编辑项的排序</span><br><span class="line">        this.tempSort &#x3D; row.sort</span><br><span class="line">    &#125; else &#123; &#x2F;&#x2F; 取消编辑还原排序</span><br><span class="line">        row.sort &#x3D; this.tempSort</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F; 修改表格数据</span><br><span class="line">    this.$set(this.tableData, index, row)</span><br><span class="line">&#125;,</span><br><span class="line">&#x2F;&#x2F; 修改排序</span><br><span class="line">sortChange(row, index) &#123;</span><br><span class="line">    &#x2F;&#x2F; 调接口修改排序，修改成功后要将 edit 设置成 false</span><br><span class="line">    sortEdit(&#123; detailId: row.detailId, sort: row.sort &#125;).then(res &#x3D;&gt; &#123;</span><br><span class="line">        this.$message.success(&#39;排序修改成功&#39;)</span><br><span class="line">        this.getTableData()</span><br><span class="line">        row.edit &#x3D; false</span><br><span class="line">        this.$set(this.tableData, index, row)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="表格列宽拖拽"><a href="#表格列宽拖拽" class="headerlink" title="表格列宽拖拽"></a>表格列宽拖拽</h2><p>查看 element 源码发现表格拖拽不能拖拽到宽度0，保留了最小宽度 30px，现在需求是指定表格每列拖拽的范围，拖拽到设定的最小宽度就不能再减少列宽，拖拽到指定的最大宽度就不能再增加列宽。<br><img src="https://s2.loli.net/2023/03/28/k3d6LtBuPN1RolW.gif" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table ref&#x3D;&quot;table&quot; v-loading&#x3D;&quot;loading&quot; :data&#x3D;&quot;tableData&quot; height&#x3D;&quot;100%&quot; border @header-dragend&#x3D;&quot;tableDrag&quot;&gt;</span><br><span class="line">&lt;&#x2F;el-table&gt;</span><br><span class="line"></span><br><span class="line">tableDrag(newWidth, oldWidth, column, event) &#123;</span><br><span class="line">    console.log(newWidth, oldWidth, column, event)</span><br><span class="line">    if (newWidth &lt;&#x3D; (column.minWidth || 200)) &#123;</span><br><span class="line">        column.width &#x3D; column.minWidth || 200</span><br><span class="line">    &#125;</span><br><span class="line">    if (newWidth &gt;&#x3D; 300) &#123;</span><br><span class="line">        column.width &#x3D; 300</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="表格展开-收缩"><a href="#表格展开-收缩" class="headerlink" title="表格展开/收缩"></a>表格展开/收缩</h2><p><img src="https://s2.loli.net/2023/03/28/Cjp9XLGUqeYusKw.gif" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button plain type&#x3D;&quot;primary&quot; size&#x3D;&quot;mini&quot; @click&#x3D;&quot;expandAll&quot;&gt;展开所有&lt;&#x2F;el-button&gt;</span><br><span class="line">&lt;el-button plain type&#x3D;&quot;primary&quot; size&#x3D;&quot;mini&quot; @click&#x3D;&quot;collapseAll&quot;&gt;收起所有&lt;&#x2F;el-button&gt;</span><br><span class="line">&lt;el-table ref&#x3D;&quot;table&quot; v-loading&#x3D;&quot;loading&quot; :data&#x3D;&quot;menuList&quot; height&#x3D;&quot;100%&quot; </span><br><span class="line">    row-key&#x3D;&quot;rsId&quot; default-expand-all :tree-props&#x3D;&quot;&#123;children: &#39;childrenList&#39;,hasChildren: &#39;hasChildren&#39;&#125;&quot;&gt;</span><br><span class="line">&lt;&#x2F;el-table&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 切换表格的展开收起</span><br><span class="line">expandTable(arr, isExpand) &#123;</span><br><span class="line">    arr.forEach(i &#x3D;&gt; &#123;</span><br><span class="line">        this.$refs.table.toggleRowExpansion(i, isExpand)</span><br><span class="line">        if (i.childrenList) &#123;</span><br><span class="line">            this.expandTable(i.childrenList, isExpand)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br><span class="line">&#x2F;&#x2F; 全部展开</span><br><span class="line">expandAll() &#123;</span><br><span class="line">    &#x2F;&#x2F; 默认展开全部的话，首次加载需要在$nextTick下进行</span><br><span class="line">    this.expandTable(this.menuList, true)</span><br><span class="line">&#125;,</span><br><span class="line">&#x2F;&#x2F; 全部收起</span><br><span class="line">collapseAll() &#123;</span><br><span class="line">    this.expandTable(this.menuList, false)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h1 id="时间选择器-期限设置"><a href="#时间选择器-期限设置" class="headerlink" title="时间选择器-期限设置"></a>时间选择器-期限设置</h1><ol>
<li>开始时间需要从当前天+1开始设置，截止时间必须为开始时间+1；</li>
<li>若已经设置过开始、截止时间，且在设置的时间范围内进行修改时，只可修改截止时间，不可修改开始时间。    </li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-dialog title&#x3D;&quot;填报期限修改&quot; :visible.sync&#x3D;&quot;editTimeVisible&quot; width&#x3D;&quot;660px&quot; :before-close&#x3D;&quot;editTimeClose&quot;&gt;</span><br><span class="line">    &lt;el-form ref&#x3D;&quot;editTimeForm&quot; :model&#x3D;&quot;editTimeForm&quot; label-width&#x3D;&quot;110px&quot; :rules&#x3D;&quot;editTimeRules&quot;&gt;</span><br><span class="line">        &lt;el-form-item label&#x3D;&quot;企业填报时间&quot; required&gt;</span><br><span class="line">            &lt;el-col :span&#x3D;&quot;11&quot;&gt;</span><br><span class="line">                &lt;el-form-item prop&#x3D;&quot;submitStartTime&quot;&gt;</span><br><span class="line">                &lt;el-date-picker</span><br><span class="line">                    v-model&#x3D;&quot;editTimeForm.submitStartTime&quot;</span><br><span class="line">                    type&#x3D;&quot;date&quot;</span><br><span class="line">                    placeholder&#x3D;&quot;开始期限&quot;</span><br><span class="line">                    value-format&#x3D;&quot;yyyy-MM-dd HH:mm:ss&quot;</span><br><span class="line">                    :picker-options&#x3D;&quot;pickerOptions1&quot;</span><br><span class="line">                    :disabled&#x3D;&quot;startTimeFlag&quot;</span><br><span class="line">                    style&#x3D;&quot;width:100%&quot;&gt;</span><br><span class="line">                &lt;&#x2F;el-date-picker&gt;</span><br><span class="line">                &lt;&#x2F;el-form-item&gt;</span><br><span class="line">            &lt;&#x2F;el-col&gt;</span><br><span class="line">            &lt;el-col style&#x3D;&quot;text-align:center&quot; :span&#x3D;&quot;2&quot;&gt;至&lt;&#x2F;el-col&gt;</span><br><span class="line">            &lt;el-col :span&#x3D;&quot;11&quot;&gt;</span><br><span class="line">                &lt;el-form-item prop&#x3D;&quot;submitEndTime&quot;&gt;</span><br><span class="line">                &lt;el-date-picker</span><br><span class="line">                    v-model&#x3D;&quot;editTimeForm.submitEndTime&quot;</span><br><span class="line">                    type&#x3D;&quot;date&quot;</span><br><span class="line">                    placeholder&#x3D;&quot;结束期限&quot;</span><br><span class="line">                    value-format&#x3D;&quot;yyyy-MM-dd&quot;</span><br><span class="line">                    :picker-options&#x3D;&quot;pickerOptions2&quot;</span><br><span class="line">                    @change&#x3D;&quot;endTimeChange&quot;</span><br><span class="line">                    style&#x3D;&quot;width:100%&quot;&gt;</span><br><span class="line">                &lt;&#x2F;el-date-picker&gt;</span><br><span class="line">                &lt;&#x2F;el-form-item&gt;</span><br><span class="line">            &lt;&#x2F;el-col&gt;</span><br><span class="line">        &lt;&#x2F;el-form-item&gt;</span><br><span class="line">    &lt;&#x2F;el-form&gt;</span><br><span class="line">    &lt;span slot&#x3D;&quot;footer&quot; class&#x3D;&quot;dialog-footer&quot;&gt;</span><br><span class="line">        &lt;el-button @click&#x3D;&quot;editTimeClose&quot;&gt;取 消&lt;&#x2F;el-button&gt;</span><br><span class="line">        &lt;el-button type&#x3D;&quot;primary&quot; @click&#x3D;&quot;editTimeSure&quot;&gt;确 定&lt;&#x2F;el-button&gt;</span><br><span class="line">    &lt;&#x2F;span&gt;</span><br><span class="line">&lt;&#x2F;el-dialog&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 时间参数</span><br><span class="line">pickerOptions1: &#123;   &#x2F;&#x2F; 开始时间为当前天+1</span><br><span class="line">    disabledDate(v) &#123;</span><br><span class="line">        &#x2F;&#x2F; return v.getTime() &lt; new Date().getTime() - 8.64e7  当前天也可选择</span><br><span class="line">        return v.getTime() &lt; new Date().getTime()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">pickerOptions2: this.endTimeOptions(), &#x2F;&#x2F; 结束时间</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 设置结束期限的禁用日期</span><br><span class="line">endTimeOptions() &#123;</span><br><span class="line">    let that &#x3D; this</span><br><span class="line">    return &#123;</span><br><span class="line">        disabledDate(v) &#123;</span><br><span class="line">            if (that.editTimeForm.submitStartTime) &#123;</span><br><span class="line">                &#x2F;&#x2F; 开始时间有值，截止时间为开始时间+1</span><br><span class="line">                return v.getTime() &lt; new Date(that.editTimeForm.submitStartTime).getTime()</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                &#x2F;&#x2F; 无开始时间，截止时间为当前天+1</span><br><span class="line">                return v.getTime() &lt; new Date().getTime()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">&#x2F;&#x2F; 结束期限改变的时候需要判断开始期限的值</span><br><span class="line">endTimeChange(val) &#123;</span><br><span class="line">    if (!this.editTimeForm.submitStartTime) &#123;</span><br><span class="line">        this.$message.warning(&#39;请先选择开始期限&#39;)</span><br><span class="line">        this.editTimeForm.submitEndTime &#x3D; null</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">&#x2F;&#x2F; 填报期限设置模态框打开</span><br><span class="line">editTimeOpen(row) &#123;</span><br><span class="line">    &#x2F;&#x2F; 若已经设置过填报开始、截止时间，且在设置的时间范围内进行修改时，只可修改截止时间，不可修改开始时间。</span><br><span class="line">    if (row.submitStartTime &amp;&amp; row.submitEndTime) &#123;</span><br><span class="line">        let currTime &#x3D; (new Date()).getTime()</span><br><span class="line">        let beforeTime &#x3D; (new Date(row.submitStartTime)).getTime()</span><br><span class="line">        let afterTime &#x3D; (new Date(row.submitEndTime)).getTime()</span><br><span class="line">        if (beforeTime &lt;&#x3D; currTime &amp;&amp; currTime &lt;&#x3D; afterTime) &#123;</span><br><span class="line">            this.startTimeFlag &#x3D; true</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            this.startTimeFlag &#x3D; false</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        this.startTimeFlag &#x3D; false</span><br><span class="line">    &#125;</span><br><span class="line">    this.editTimeForm.submitStartTime &#x3D; row.submitStartTime</span><br><span class="line">    this.editTimeForm.submitEndTime &#x3D; row.submitEndTime</span><br><span class="line">    this.editTimeForm.dataYear &#x3D; row.dataYear</span><br><span class="line">    this.editTimeVisible &#x3D; true</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h1 id="滑块组件改装成滑动校验"><a href="#滑块组件改装成滑动校验" class="headerlink" title="滑块组件改装成滑动校验"></a>滑块组件改装成滑动校验</h1><p><img src="https://i.loli.net/2021/02/24/ajrsuq5gGdo6O1M.gif" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-form :model&#x3D;&quot;ruleForm&quot; :rules&#x3D;&quot;rules&quot; ref&#x3D;&quot;ruleForm&quot; label-width&#x3D;&quot;100px&quot;&gt;</span><br><span class="line">    &lt;el-form-item label&#x3D;&quot;滑动验证&quot; prop&#x3D;&quot;checkBtn&quot;&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;slider-div&quot;&gt;</span><br><span class="line">            &lt;el-slider</span><br><span class="line">                v-model&#x3D;&quot;ruleForm.checkBtn&quot;</span><br><span class="line">                :show-tooltip&#x3D;&quot;false&quot;</span><br><span class="line">            &gt;&lt;&#x2F;el-slider&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;el-form-item&gt;</span><br><span class="line">&lt;&#x2F;el-form&gt;</span><br><span class="line"></span><br><span class="line">const checkBtnValid &#x3D; (rule, value, callback) &#x3D;&gt; &#123;</span><br><span class="line">    if (value &lt; 100) &#123;</span><br><span class="line">        callback(new Error(&#39;滑动验证失败，请重新滑动&#39;))</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        callback()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">ruleForm: &#123;</span><br><span class="line">    checkBtn: 0,</span><br><span class="line">&#125;,</span><br><span class="line">rules: &#123;</span><br><span class="line">    checkBtn: [</span><br><span class="line">        &#123;</span><br><span class="line">            required: true,</span><br><span class="line">            validator: checkBtnValid,</span><br><span class="line">            trigger: &#39;change&#39;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 通过更改样式将element UI的滑块改成滑动校验</span><br><span class="line">.slider-div &#123;&#x2F;&#x2F; 滑块的父div</span><br><span class="line">    border: 1px solid rgba(4, 22, 22, 0.25);</span><br><span class="line">    background-color: rgba(0, 165, 161, 0.05);</span><br><span class="line">    border-radius: 4px;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; 滑块样式</span><br><span class="line">&#x2F;deep&#x2F;.el-slider &#123;</span><br><span class="line">    &#x2F;&#x2F; 由于按钮滑到最右边是超出滑块横条的，所以留出0.4rem（按钮的宽度）的空间存放按钮，凿除滑倒头并且还在框内的假象</span><br><span class="line">    width: calc(100% - 0.4rem); </span><br><span class="line">    &amp;__runway &#123;</span><br><span class="line">        height: 0.4rem;</span><br><span class="line">        margin: 0;</span><br><span class="line">        background-color: transparent;</span><br><span class="line">        .el-slider__bar &#123;</span><br><span class="line">            height: 0.4rem;</span><br><span class="line">        &#125;</span><br><span class="line">        &#x2F;&#x2F; 在滑条上面增加文字</span><br><span class="line">        &amp;::after &#123;</span><br><span class="line">            content: &quot;按住滑块拖到右边&quot;;</span><br><span class="line">            color: rgba(4, 22, 22, 0.25);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F; 设置按钮的样式</span><br><span class="line">    &amp;__button-wrapper &#123;</span><br><span class="line">        width: 0.4rem;</span><br><span class="line">        height: 0.4rem;</span><br><span class="line">        top: -1px;</span><br><span class="line">        transform: translateX(0%);</span><br><span class="line">        .el-slider__button &#123;</span><br><span class="line">            width: 0.4rem;</span><br><span class="line">            height: 0.4rem;</span><br><span class="line">            border: 1px solid rgba(4, 22, 22, 0.25);</span><br><span class="line">            border-radius: 4px;</span><br><span class="line">            &amp;::after &#123;</span><br><span class="line">                content: &quot;&gt;&gt;&quot;;</span><br><span class="line">                line-height: 0.4rem;</span><br><span class="line">                color: rgba(4, 22, 22, 0.25);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h1><h2 id="图片预览组件新增下载功能"><a href="#图片预览组件新增下载功能" class="headerlink" title="图片预览组件新增下载功能"></a>图片预览组件新增下载功能</h2><p>element内部有一个图片预览组件 - image-viewer，但是这个组件只有图片的放大缩小旋转等功能，但是没有下载的功能。以下是引用该组件并且新增下载功能的代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;el-button type&#x3D;&quot;primary&quot; @click&#x3D;&quot;previewImage&quot;&gt;显示图片&lt;&#x2F;el-button&gt;</span><br><span class="line">        &lt;!-- 图片预览组件 --&gt;</span><br><span class="line">        &lt;el-image-viewer </span><br><span class="line">            v-if&#x3D;&quot;imgViewerShow&quot; </span><br><span class="line">            ref&#x3D;&quot;elImageViewer&quot; </span><br><span class="line">            :on-close&#x3D;&quot;()&#x3D;&gt;&#123;imgViewerShow&#x3D;false&#125;&quot; </span><br><span class="line">            :url-list&#x3D;&quot;preImgList&quot; &#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">&#x2F;&#x2F; 引入图片预览组件</span><br><span class="line">import ElImageViewer from &#39;element-ui&#x2F;packages&#x2F;image&#x2F;src&#x2F;image-viewer&#39;</span><br><span class="line">export default &#123;</span><br><span class="line">    &#x2F;&#x2F; 注册图片预览组件</span><br><span class="line">    components: &#123; ElImageViewer &#125;,</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            qrcodeUrl:&#39;图片的具体url&#39;,</span><br><span class="line">            &#x2F;&#x2F; 图片预览组件需要展示的图片数据</span><br><span class="line">            preImgList:[],</span><br><span class="line">            &#x2F;&#x2F; 图片预览组件是否显示标志</span><br><span class="line">            imgViewerShow:false</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        &#x2F;&#x2F; 预览图片-新增下载功能</span><br><span class="line">        previewImage() &#123;</span><br><span class="line">            if (this.qrcodeUrl) &#123;</span><br><span class="line">                this.preImgList &#x3D; [this.qrcodeUrl]</span><br><span class="line">                this.imgViewerShow &#x3D; true</span><br><span class="line">                this.$nextTick(() &#x3D;&gt; &#123;</span><br><span class="line">                    &#x2F;&#x2F; 获取图片预览工具按钮容器元素</span><br><span class="line">                    const iParent &#x3D; document.getElementsByClassName(&#39;el-image-viewer__actions__inner&#39;)</span><br><span class="line">                    if (iParent &amp;&amp; iParent.length &gt; 0) &#123;</span><br><span class="line">                        const lastNodeClass &#x3D; iParent[0].lastChild.getAttribute(&#39;class&#39;)</span><br><span class="line">                        &#x2F;&#x2F; 新增下载按钮</span><br><span class="line">                        if (lastNodeClass !&#x3D;&#x3D; &#39;el-icon-download&#39;) &#123;</span><br><span class="line">                            const i &#x3D; document.createElement(&#39;i&#39;)</span><br><span class="line">                            i.setAttribute(&#39;class&#39;, &#39;el-icon-download&#39;)</span><br><span class="line">                            &#x2F;&#x2F; 给下载按钮绑定点击事件</span><br><span class="line">                            i.onclick &#x3D; () &#x3D;&gt; &#123; this.downloadOpera() &#125;</span><br><span class="line">                            iParent[0].appendChild(i)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                this.preImgList &#x3D; []</span><br><span class="line">                this.$message.warning(&#39;当前无图片！&#39;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#x2F;&#x2F; 下载图片操作</span><br><span class="line">        downloadOpera() &#123;</span><br><span class="line">            this.downloadImg(this.$refs.elImageViewer.currentImg, &#39;图片.png&#39;)</span><br><span class="line">        &#125;,</span><br><span class="line">        &#x2F;&#x2F; 图片下载公共方法</span><br><span class="line">        downloadImg(url,name)&#123;</span><br><span class="line">            const image &#x3D; new Image()</span><br><span class="line">            &#x2F;&#x2F; 解决跨域 Canvas 污染问题</span><br><span class="line">            image.setAttribute(&#39;crossOrigin&#39;, &#39;anonymous&#39;)</span><br><span class="line">            image.src &#x3D; url</span><br><span class="line">            image.onload &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">                const canvas &#x3D; document.createElement(&#39;canvas&#39;)</span><br><span class="line">                canvas.width &#x3D; image.width</span><br><span class="line">                canvas.height &#x3D; image.height</span><br><span class="line">                const ctx &#x3D; canvas.getContext(&#39;2d&#39;)</span><br><span class="line">                ctx.drawImage(image, 0, 0, image.width, image.height)</span><br><span class="line">                canvas.toBlob((blob) &#x3D;&gt; &#123;</span><br><span class="line">                    const url &#x3D; URL.createObjectURL(blob)</span><br><span class="line">                    const eleLink &#x3D; document.createElement(&#39;a&#39;)</span><br><span class="line">                    eleLink.download &#x3D; name</span><br><span class="line">                    eleLink.href &#x3D; url</span><br><span class="line">                    eleLink.click()</span><br><span class="line">                    eleLink.remove()</span><br><span class="line">                    &#x2F;&#x2F; 用完释放URL对象</span><br><span class="line">                    URL.revokeObjectURL(url)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="图片上传后自动切割"><a href="#图片上传后自动切割" class="headerlink" title="图片上传后自动切割"></a>图片上传后自动切割</h2><p><img src="https://s2.loli.net/2023/03/29/NyJuDaiYPV1noA4.gif" alt=""><br>现项目中需要配置楼层广告，一层展示一张或多张广告图，由于UI提供的广告图都是完整的，运维那边自己切图，图片比列相差很大，导致楼层广告最终的展示效果差强人意，为了解决这个问题，由系统自行切图，根据上传的广告图，按照模版要求数量将广告图切割成多个等比的图片。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-upload :http-request&#x3D;&quot;requestUpload&quot;&gt;&lt;&#x2F;el-upload&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; fileUpload -- 图片上传接口，返回图片地址</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 覆盖默认的上传行为，自定义上传</span><br><span class="line">requestUpload(file)&#123;</span><br><span class="line">    const formData &#x3D; new FormData()</span><br><span class="line">    formData.append(&#39;file&#39;, file.file)</span><br><span class="line">    &#x2F;&#x2F; 压缩图片后上传</span><br><span class="line">    fileUpload(formData).then(res &#x3D;&gt; &#123;</span><br><span class="line">        const name &#x3D; res.result.path.split(&#39;&#x2F;&#39;)</span><br><span class="line">        this.fileList.push(&#123;</span><br><span class="line">            name: name[name.length - 1],</span><br><span class="line">            url: res.result.url</span><br><span class="line">        &#125;)</span><br><span class="line">        &#x2F;&#x2F; 切割图片</span><br><span class="line">        this.divisionImg(file.file)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>图片上传 检验宽高 必须和第一张图片保持一致</p>
<h1 id="树形结构"><a href="#树形结构" class="headerlink" title="树形结构"></a>树形结构</h1><h2 id="展开至某个层级"><a href="#展开至某个层级" class="headerlink" title="展开至某个层级"></a>展开至某个层级</h2><p><img src="https://s2.loli.net/2023/03/28/Jx1cZDoyMsXFvI7.gif" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 视图</span><br><span class="line">&lt;el-row class&#x3D;&quot;mt20&quot;&gt;</span><br><span class="line">    &lt;el-col :span&#x3D;&quot;6&quot;&gt;</span><br><span class="line">        展开至：</span><br><span class="line">        &lt;el-select v-model&#x3D;&quot;value&quot; placeholder&#x3D;&quot;请选择&quot; @change&#x3D;&quot;levelChange&quot;&gt;</span><br><span class="line">            &lt;el-option v-for&#x3D;&quot;item in options&quot; :key&#x3D;&quot;item.value&quot; :label&#x3D;&quot;item.label&quot; :value&#x3D;&quot;item.value&quot;&#x2F;&gt;</span><br><span class="line">        &lt;&#x2F;el-select&gt;</span><br><span class="line">    &lt;&#x2F;el-col&gt;</span><br><span class="line">    &lt;el-col :span&#x3D;&quot;18&quot;&gt;</span><br><span class="line">        &lt;el-button class&#x3D;&quot;ml20&quot; type&#x3D;&quot;primary&quot; plain @click&#x3D;&quot;openAll&quot;&gt;展开所有&lt;&#x2F;el-button&gt;</span><br><span class="line">        &lt;el-button type&#x3D;&quot;primary&quot; plain @click&#x3D;&quot;closeAll&quot;&gt;收缩所有&lt;&#x2F;el-button&gt;</span><br><span class="line">    &lt;&#x2F;el-col&gt;</span><br><span class="line">&lt;&#x2F;el-row&gt;</span><br><span class="line">&lt;el-tree ref&#x3D;&quot;tree&quot; :data&#x3D;&quot;treeData&quot; node-key&#x3D;&quot;id&quot; :default-expanded-keys&#x3D;&quot;expand&quot; </span><br><span class="line">  :props&#x3D;&quot;defaultProps&quot; class&#x3D;&quot;mt20&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 数据</span><br><span class="line">&#x2F;&#x2F; 树形结构展示数据</span><br><span class="line">treeData: [</span><br><span class="line">    &#123;</span><br><span class="line">        id: 1,label: &#39;一级 1&#39;,</span><br><span class="line">        children: [&#123;</span><br><span class="line">            id: 4,label: &#39;二级 1-1&#39;,</span><br><span class="line">            children: [</span><br><span class="line">                &#123;id: 9,label: &#39;三级 1-1-1&#39;&#125;, </span><br><span class="line">                &#123;id: 10,label: &#39;三级 1-1-2&#39;&#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        id: 2,label: &#39;一级 2&#39;,</span><br><span class="line">        children: [</span><br><span class="line">            &#123; id: 5,label: &#39;二级 2-1&#39;&#125;, </span><br><span class="line">            &#123; id: 6,label: &#39;二级 2-2&#39;&#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        id: 3,label: &#39;一级 3&#39;,</span><br><span class="line">        children: [</span><br><span class="line">            &#123;id: 7,label: &#39;二级 3-1&#39;&#125;, </span><br><span class="line">            &#123;id: 8,label: &#39;二级 3-2&#39;&#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">],</span><br><span class="line">&#x2F;&#x2F; 树形接口默认配置</span><br><span class="line">defaultProps: &#123;</span><br><span class="line">    children: &#39;children&#39;,</span><br><span class="line">    label: &#39;label&#39;</span><br><span class="line">&#125;,</span><br><span class="line">&#x2F;&#x2F; 树形结构展开项</span><br><span class="line">expand: [],</span><br><span class="line">&#x2F;&#x2F; 树形结构添加层级后的展示数据</span><br><span class="line">levelData: [],</span><br><span class="line">&#x2F;&#x2F; 展开收缩标志</span><br><span class="line">expandAll: false,</span><br><span class="line">&#x2F;&#x2F; 下拉选选项</span><br><span class="line">options: [</span><br><span class="line">    &#123;value: &#39;1&#39;,label: &#39;1级&#39;&#125;, </span><br><span class="line">    &#123;value: &#39;2&#39;,label: &#39;2级&#39;&#125;,</span><br><span class="line">    &#123;value: &#39;3&#39;,label: &#39;3级&#39;&#125;</span><br><span class="line">],</span><br><span class="line">&#x2F;&#x2F; 下拉选值</span><br><span class="line">value: &#39;&#39;,</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 方法</span><br><span class="line">created() &#123;</span><br><span class="line">    &#x2F;&#x2F; 给tree数据添加指定层级数据</span><br><span class="line">    this.levelData &#x3D; this.setLevel(this.treeData, 0)</span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">    &#x2F;&#x2F; 给tree数据添加指定层级数据</span><br><span class="line">    setLevel(arry, level) &#123;</span><br><span class="line">        level++</span><br><span class="line">        return arry.map(cu &#x3D;&gt; &#123;</span><br><span class="line">            cu.level &#x3D; level</span><br><span class="line">            if (cu.children &amp;&amp; cu.children.length &gt; 0) &#123;</span><br><span class="line">                this.setLevel(cu.children, level)</span><br><span class="line">            &#125;</span><br><span class="line">            return cu</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F; 展开所有</span><br><span class="line">    openAll() &#123;</span><br><span class="line">        this.expandAll &#x3D; false</span><br><span class="line">        &#x2F;&#x2F; 否则将所有节点的expanded设置成true，展开所有</span><br><span class="line">        this.changeTreeNodeStatus(this.$refs.tree.store.nodesMap)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F; 收缩所有</span><br><span class="line">    closeAll() &#123;</span><br><span class="line">        this.expandAll &#x3D; true</span><br><span class="line">        &#x2F;&#x2F; 否则将所有节点的expanded设置成false，收缩所有</span><br><span class="line">        this.changeTreeNodeStatus(this.$refs.tree.store.nodesMap)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F; 修改节点展开&#x2F;收缩的状态</span><br><span class="line">    changeTreeNodeStatus(node) &#123;</span><br><span class="line">        this.expandAll &#x3D; !this.expandAll</span><br><span class="line">        for (const i in node) &#123;</span><br><span class="line">            node[i].expanded &#x3D; this.expandAll</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F; 指定展开某个层级</span><br><span class="line">    levelChange(val) &#123;</span><br><span class="line">        &#x2F;&#x2F; 收缩所有的节点</span><br><span class="line">        this.closeAll()</span><br><span class="line">        this.expand &#x3D; []</span><br><span class="line">        const list &#x3D; []</span><br><span class="line">        &#x2F;&#x2F; 获取指定层级的数据</span><br><span class="line">        const curLevel &#x3D; this.getLevelData(this.levelData, val, list)</span><br><span class="line">        &#x2F;&#x2F; 获取指定层级所有的id，设置成展开项</span><br><span class="line">        if (curLevel &amp;&amp; curLevel.length &gt; 0) &#123;</span><br><span class="line">            this.expand &#x3D; curLevel.map(cu &#x3D;&gt; &#123;</span><br><span class="line">                return cu.id</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F; 获取指定层级的数据</span><br><span class="line">    getLevelData(array, level, list) &#123;</span><br><span class="line">      array.map(cu &#x3D;&gt; &#123;</span><br><span class="line">        &#x2F;&#x2F; 将所有小于等于指定层级-1的所有数据保留</span><br><span class="line">        if (cu.level &lt;&#x3D; level * 1 - 1) &#123;</span><br><span class="line">          list.push(cu)</span><br><span class="line">        &#125;</span><br><span class="line">        if (cu.children &amp;&amp; cu.children.length &gt; 0) &#123;</span><br><span class="line">          this.getLevelData(cu.children, level, list)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      return list</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>数据太多渲染慢，无法显示loading<br>vue-easy-tree</p>
<p>数据太多清空多选慢<br>获取选中的数据然后循环一个一个清空，加loading</p>

    </div>

    
    
    
    
    
      <div>
          <div>
    
        <div style="text-align:center;color: #666;font-size:14px;">-------------本文结束　<i class="fa fa-hourglass-end" style="color:rgb(90,85,85)"></i>　感谢阅读-------------</div>
    
</div>
      </div>
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>Crystal
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://crystalsummer.gitee.io/2019/03/21/Element/" title="Element">http://crystalsummer.gitee.io/2019/03/21/Element/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/UI/" rel="tag"><i class="fa fa-tag"></i> UI</a>
              <a href="/tags/Element/" rel="tag"><i class="fa fa-tag"></i> Element</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2019/01/12/Hexo%20+%20GitHub%20%E5%88%9B%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/" rel="prev" title="Hexo + GitHub 创建个人博客">
      <i class="fa fa-chevron-left"></i> Hexo + GitHub 创建个人博客
    </a></div>
      <div class="post-nav-item">
    <a href="/2019/05/20/Echarts/" rel="next" title="Echarts">
      Echarts <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    
  <div class="comments">
    <div id="lv-container" data-id="city" data-uid="MTAyMC81MDEyMC8yNjYxMA"></div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#走马灯：多个幻灯片循环展示多个数据"><span class="nav-number">1.</span> <span class="nav-text">走马灯：多个幻灯片循环展示多个数据</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#自动搜索"><span class="nav-number">2.</span> <span class="nav-text">自动搜索</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#级联选择器"><span class="nav-number">3.</span> <span class="nav-text">级联选择器</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#动态加载"><span class="nav-number">3.1.</span> <span class="nav-text">动态加载</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#单选模式加动态加载"><span class="nav-number">3.2.</span> <span class="nav-text">单选模式加动态加载</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#上传"><span class="nav-number">4.</span> <span class="nav-text">上传</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#限制上传图片的宽高"><span class="nav-number">4.1.</span> <span class="nav-text">限制上传图片的宽高</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#表单"><span class="nav-number">5.</span> <span class="nav-text">表单</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#动态增减表单项"><span class="nav-number">5.1.</span> <span class="nav-text">动态增减表单项</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#表单校验报错但不影响提交"><span class="nav-number">5.2.</span> <span class="nav-text">表单校验报错但不影响提交</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#表格"><span class="nav-number">6.</span> <span class="nav-text">表格</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#表格多选"><span class="nav-number">6.1.</span> <span class="nav-text">表格多选</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#默认选中某些多选框"><span class="nav-number">6.1.1.</span> <span class="nav-text">默认选中某些多选框</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#多选框disabled"><span class="nav-number">6.1.2.</span> <span class="nav-text">多选框disabled</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#注意事项"><span class="nav-number">6.1.3.</span> <span class="nav-text">注意事项</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#表格编辑"><span class="nav-number">6.2.</span> <span class="nav-text">表格编辑</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#表格列宽拖拽"><span class="nav-number">6.3.</span> <span class="nav-text">表格列宽拖拽</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#表格展开-收缩"><span class="nav-number">6.4.</span> <span class="nav-text">表格展开&#x2F;收缩</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#时间选择器-期限设置"><span class="nav-number">7.</span> <span class="nav-text">时间选择器-期限设置</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#滑块组件改装成滑动校验"><span class="nav-number">8.</span> <span class="nav-text">滑块组件改装成滑动校验</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#图片"><span class="nav-number">9.</span> <span class="nav-text">图片</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#图片预览组件新增下载功能"><span class="nav-number">9.1.</span> <span class="nav-text">图片预览组件新增下载功能</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#图片上传后自动切割"><span class="nav-number">9.2.</span> <span class="nav-text">图片上传后自动切割</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#树形结构"><span class="nav-number">10.</span> <span class="nav-text">树形结构</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#展开至某个层级"><span class="nav-number">10.1.</span> <span class="nav-text">展开至某个层级</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Crystal"
      src="/uploads/avatar2.png">
  <p class="site-author-name" itemprop="name">Crystal</p>
  <div class="site-description" itemprop="description">Only for recording life</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">30</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">26</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">26</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/crystal-summer" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;crystal-summer" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:herr_510@163.com" title="E-Mail → mailto:herr_510@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/5596982190/profile?rightmod=1&wvr=6&mod=personnumber&is_all=1" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;5596982190&#x2F;profile?rightmod&#x3D;1&amp;wvr&#x3D;6&amp;mod&#x3D;personnumber&amp;is_all&#x3D;1" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://www.ruanyifeng.com/blog/" title="http:&#x2F;&#x2F;www.ruanyifeng.com&#x2F;blog&#x2F;" rel="noopener" target="_blank">阮一峰</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://juejin.im/" title="https:&#x2F;&#x2F;juejin.im&#x2F;" rel="noopener" target="_blank">掘金</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://developer.mozilla.org/zh-CN/" title="https:&#x2F;&#x2F;developer.mozilla.org&#x2F;zh-CN&#x2F;" rel="noopener" target="_blank">MDN</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.zhangxinxu.com/" title="https:&#x2F;&#x2F;www.zhangxinxu.com&#x2F;" rel="noopener" target="_blank">张鑫旭</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://codepen.io/" title="https:&#x2F;&#x2F;codepen.io&#x2F;" rel="noopener" target="_blank">CodePen</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.nowcoder.com/" title="https:&#x2F;&#x2F;www.nowcoder.com&#x2F;" rel="noopener" target="_blank">牛客</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.dandyweng.com/" title="https:&#x2F;&#x2F;www.dandyweng.com&#x2F;" rel="noopener" target="_blank">翁天信</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2019 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Crystal Summer</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">444k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">6:44</span>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script color='34,34,34' opacity='0.5' zIndex='' count='99' src="/lib/canvas-nest/canvas-nest-nomobile.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdn.bootcss.com/fancybox/3.5.7/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

<script>
NexT.utils.loadComments(document.querySelector('#lv-container'), () => {
  window.livereOptions = {
    refer: location.pathname.replace(CONFIG.root, '').replace('index.html', '')
  };
  (function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
  })(document, 'script');
});
</script>

</body>
</html>
