<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/bitbug_favicon32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/bitbug_favicon16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.bootcss.com/fancybox/3.5.7/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"crystalsummer.gitee.io","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":true},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":true,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>


  <script>
  (function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0f81ff2f.js","daovoice")
  daovoice('init', {
      app_id: "4b921942"
    }); 
  daovoice('update');
  </script>


  <meta property="og:type" content="article">
<meta property="og:title" content="Vue2（二）">
<meta property="og:url" content="http://crystalsummer.gitee.io/2019/11/17/Vue2%EF%BC%88%E4%BA%8C%EF%BC%89/index.html">
<meta property="og:site_name" content="Crystal&#39;s Blog">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2020/05/23/c2JlEHzDWafFILV.png">
<meta property="article:published_time" content="2019-11-17T02:45:50.000Z">
<meta property="article:modified_time" content="2022-08-10T07:37:05.810Z">
<meta property="article:author" content="Crystal">
<meta property="article:tag" content="Vue">
<meta property="article:tag" content="原理">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2020/05/23/c2JlEHzDWafFILV.png">

<link rel="canonical" href="http://crystalsummer.gitee.io/2019/11/17/Vue2%EF%BC%88%E4%BA%8C%EF%BC%89/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Vue2（二） | Crystal's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Crystal's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Crystal's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/crystal-summer" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://crystalsummer.gitee.io/2019/11/17/Vue2%EF%BC%88%E4%BA%8C%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar2.png">
      <meta itemprop="name" content="Crystal">
      <meta itemprop="description" content="Only for recording life">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Crystal's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Vue2（二）
        </h1>

        <div class="post-meta">

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">posted</span>

              <time title="创建时间：2019-11-17 10:45:50" itemprop="dateCreated datePublished" datetime="2019-11-17T10:45:50+08:00">2019-11-17</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">in</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Vue/" itemprop="url" rel="index"><span itemprop="name">Vue</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Vue/%E5%8E%9F%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">原理</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="count">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">count：</span>
              <span>16k</span>
            </span>
            <span class="post-meta-item" title="readingTime">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">readingTime &asymp;</span>
              <span>15 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><img src="https://i.loli.net/2020/05/23/c2JlEHzDWafFILV.png" alt=""></p>
<a id="more"></a>
<h1 id="v-model原理"><a href="#v-model原理" class="headerlink" title="v-model原理"></a>v-model原理</h1><p> v-model 本质上是语法糖，在内部为不同的输入元素使用不同的属性并抛出不同的事件：</p>
<ul>
<li>text 和 textarea 元素使用 value 属性和 input 事件；</li>
<li>checkbox 和 radio 使用 checked 属性和 change 事件；</li>
<li>select 将 value 作为 prop 并将 change 作为事件。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 以 input 为例</span><br><span class="line">&lt;input v-model&#x3D;&#39;something&#39;&gt;</span><br><span class="line"></span><br><span class="line">相当于</span><br><span class="line"></span><br><span class="line">&lt;input v-bind:value&#x3D;&quot;something&quot; v-on:input&#x3D;&quot;something &#x3D; $event.target.value&quot;&gt;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>如果是在自定义组件中，v-model 默认会利用名为 value 的 prop 和名为 input 的emit事件实现。</p>
<h1 id="Vue-不常用指令"><a href="#Vue-不常用指令" class="headerlink" title="Vue 不常用指令"></a>Vue 不常用指令</h1><p>v-text：更新元素的 textContent，可以使用大括号（Mustache 标签）；<br>v-html：更新元素的 innerHTML；<br>v-slot：缩写#，插槽名；<br>v-once：元素和组件只渲染一次；<br>v-pre：跳过该元素的编译，如果使用了Mustache 标签，那么直接显示大括号；<br>v-cloak：和CSS的<code>[v-cloak]{display:none}</code>一起使用，用于隐藏未编译的Mustache标签直到实例准备完毕。</p>
<h1 id="Vue-修饰符"><a href="#Vue-修饰符" class="headerlink" title="Vue 修饰符"></a>Vue 修饰符</h1><h2 id="表单修饰符"><a href="#表单修饰符" class="headerlink" title="表单修饰符"></a>表单修饰符</h2><p>.lazy：改变输入框的值时，value不变，当光标离开输入框，value值才变(input是不变，change时才变)；<br>.number：将输入值转换成数值，先输入数字后输入字符，最后的值是先输入的数字，先输入字符后输入数字，number修饰符无效。在原生input里面，可以输入小数，但是在element UI封装的input里面，只能输入整数；<br>.trim：去除首尾空格，中间空格保留；</p>
<h2 id="事件修饰符"><a href="#事件修饰符" class="headerlink" title="事件修饰符"></a>事件修饰符</h2><p>.stop：阻止事件向外冒泡；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div @click&#x3D;&quot;testFun(1)&quot;&gt;</span><br><span class="line">    &lt;div @click.stop&#x3D;&quot;testFun(2)&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line">testFun(num)&#123;</span><br><span class="line">    console.log(num)</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; 点击子div</span><br><span class="line">&#x2F;&#x2F; 子div未绑定stop，先输出2 后输出1</span><br><span class="line">&#x2F;&#x2F; 子div绑定stop，只输出2</span><br></pre></td></tr></table></figure>
<p>.capture：事件默认是由里往外冒泡，capture作用是反过来，由外往内捕获；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div @click.capture&#x3D;&quot;testFun(1)&quot;&gt;</span><br><span class="line">    &lt;div @click&#x3D;&quot;testFun(2)&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line">testFun(num)&#123;</span><br><span class="line">    console.log(num)</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; 点击子div</span><br><span class="line">&#x2F;&#x2F; 父div未绑定capture，先输出2 后输出1</span><br><span class="line">&#x2F;&#x2F; 父div绑定capture，先输出1 后输出2</span><br></pre></td></tr></table></figure>
<p>.prevent：阻止默认事件，如点击a链接，正常情况下会跳转，加上prevent之后不会跳转；<br>.self：事件绑定的本身才会触发事件；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div @click.self&#x3D;&quot;testFun(1)&quot;&gt;</span><br><span class="line">    &lt;div @click&#x3D;&quot;testFun(2)&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line">testFun(num)&#123;</span><br><span class="line">    console.log(num)</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; 点击子div</span><br><span class="line">&#x2F;&#x2F; 父div未绑定self，先输出2 后输出1</span><br><span class="line">&#x2F;&#x2F; 父div绑定self，只输出2，只有点击父div，才会输出1</span><br></pre></td></tr></table></figure>
<p>.once：事件只触发一次；<br>.native：绑定原生事件；<br>.passive：当我们在监听元素滚动事件的时候，会一直触发onscroll事件，在pc端是没啥问题的，但是在移动端，会让我们的网页变卡，因此我们使用这个修饰符的时候，相当于给onscroll事件整了一个.lazy修饰符；<br>.sync：对一个 prop 进行“双向绑定”。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 当父组件传值进子组件，子组件想要改变这个值时，可以这么做</span><br><span class="line">&#x2F;&#x2F; 父组件里</span><br><span class="line">&lt;children :foo&#x3D;&quot;bar&quot; @update:foo&#x3D;&quot;val &#x3D;&gt; bar &#x3D; val&quot;&gt;&lt;&#x2F;children&gt;</span><br><span class="line">&#x2F;&#x2F; 子组件里</span><br><span class="line">this.$emit(&#39;update:foo&#39;, newValue)</span><br><span class="line">&#x2F;&#x2F; 父组件里</span><br><span class="line">&lt;children :foo.sync&#x3D;&quot;bar&quot;&gt;&lt;&#x2F;children&gt;</span><br><span class="line">&#x2F;&#x2F; 子组件里</span><br><span class="line">this.$emit(&#39;update:foo&#39;, newValue)</span><br></pre></td></tr></table></figure>
<h2 id="按键修饰符"><a href="#按键修饰符" class="headerlink" title="按键修饰符"></a>按键修饰符</h2><p>普通按键修饰符：<br>.enter .tab .delete .space .esc .up .down .left .right<br>系统按键修饰符：<br>.ctrl .alt .meta .shift<br>其他常见修饰符：<br>48～57为0到9十个阿拉伯数字 65～90为26个大写英文字母，97～122号为26个小写英文字母<br>.exact：精确控制系统修饰符组合触发的事件；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@click.ctrl &#x2F;&#x2F; 点击ctrl会触发，点击shift+ctrl也会触发</span><br><span class="line">@click.ctrl.exact &#x2F;&#x2F; 只有点击ctrl时才会触发</span><br></pre></td></tr></table></figure>
<h2 id="鼠标按钮修饰符"><a href="#鼠标按钮修饰符" class="headerlink" title="鼠标按钮修饰符"></a>鼠标按钮修饰符</h2><p>.left .right .middle：鼠标的左右中按键触发的事件；</p>
<h1 id="v-if-和-v-show"><a href="#v-if-和-v-show" class="headerlink" title="v-if 和 v-show"></a>v-if 和 v-show</h1><p>相同点：都是动态渲染DOM元素。</p>
<p>不同点：</p>
<ul>
<li><p>v-if：初始化快，但切换代价高； 只有初始条件为真时，才渲染元素，假的时候不渲染； 可以用在template上。</p>
</li>
<li><p>v-show： 初始化慢，但切换成本低（适合频繁切换）； 不管初始条件是什么，都会渲染DOM元素，只是做CSS的简单切换； 不可以用在template上。</p>
</li>
</ul>
<h1 id="v-for-和-v-if-不建议一起使用的原因"><a href="#v-for-和-v-if-不建议一起使用的原因" class="headerlink" title="v-for 和 v-if 不建议一起使用的原因"></a>v-for 和 v-if 不建议一起使用的原因</h1><p>在Vue2中，v-for的优先级比v-if高，比如v-for循环1-4，并且v-if判断数字是否等于3，Vue会先v-for出4个节点，然后再判断是否为3，是3的话就显示节点，其他节点隐藏。<br>很明显，v-for和v-if一起使用的时候，会渲染无用节点，增加无用DOM的操作。</p>
<h1 id="class-和-style-的动态绑定"><a href="#class-和-style-的动态绑定" class="headerlink" title="class 和 style 的动态绑定"></a>class 和 style 的动态绑定</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; class - 对象语法 isActive&#x3D;true hasError&#x3D;false</span><br><span class="line">&lt;div :class&#x3D;&quot;&#123;&#39;active&#39;:isActive,&#39;danger&#39;:hasError&#125;&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&#x2F;&#x2F; class - 数组语法</span><br><span class="line">&lt;div :class&#x3D;&quot;[isActive?&#39;active&#39;:&#39;&#39;,hasError?&#39;danger&#39;:&#39;&#39;]&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&#x2F;&#x2F; style - 对象语法 activeColor&#x3D;&#39;red&#39; fontSize&#x3D;18</span><br><span class="line">&lt;div :style&#x3D;&quot;&#123;color: activeColor, fontSize: fontSize + &#39;px&#39; &#125;&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&#x2F;&#x2F; style - 数组语法 styleColor&#x3D;&#123;color:&#39;red&#39;&#125; styleSize&#x3D;&#123;fontSize:&#39;18px&#39;&#125;</span><br><span class="line">&lt;div :style&#x3D;&quot;[styleColor,styleSize]&quot;&gt;&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<h1 id="为什么data是个函数并且返回一个对象"><a href="#为什么data是个函数并且返回一个对象" class="headerlink" title="为什么data是个函数并且返回一个对象"></a>为什么data是个函数并且返回一个对象</h1><p>对象是引用关系，如果组件中 data 是一个对象，这样作用域没有隔离，组件中的 data 属性会相互影响，但是如果是一个函数的话，组件多处调用，每一次调用就会执行data函数并返回新的数据对象，这样，可以<strong>避免多处调用造成数据污染</strong>。</p>
<h1 id="如何获取data的初始值"><a href="#如何获取data的初始值" class="headerlink" title="如何获取data的初始值"></a>如何获取data的初始值</h1><p>可以通过 this.$options.data().xxx 来获取初始值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">data()&#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        num:10</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">mounted()&#123;</span><br><span class="line">    this.num &#x3D; 100</span><br><span class="line">&#125;,</span><br><span class="line">methods:&#123;</span><br><span class="line">    howMuch()&#123;</span><br><span class="line">        return this.num + this.$options.data().num </span><br><span class="line">        &#x2F;&#x2F; 100 + 10</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="如何定义不需要响应的数据"><a href="#如何定义不需要响应的数据" class="headerlink" title="如何定义不需要响应的数据"></a>如何定义不需要响应的数据</h1><p>在实际开发中，会有一些数据从未改变过，是死数据，既然没有改变，就不需要响应式处理。比如下拉框的选项。</p>
<ul>
<li>定义在data之外<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data()&#123;</span><br><span class="line">    this.list1&#x3D;[&#123;XXX&#125;......]</span><br><span class="line">    return &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>使用Object.freeze() - 冻结数据，冻结后不可修改、不可删除、不可新增<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        list1: Object.freeze([&#123;XXX&#125;...]),</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h1 id="computed如何实现传参"><a href="#computed如何实现传参" class="headerlink" title="computed如何实现传参"></a>computed如何实现传参</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;&#123;&#123;total(3)&#125;&#125;&lt;&#x2F;div&gt;</span><br><span class="line">computed:&#123;</span><br><span class="line">    &#x2F;&#x2F; 使用闭包</span><br><span class="line">    total()&#123;</span><br><span class="line">        return function(n)&#123;</span><br><span class="line">            return n*2</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Vue-单向数据流"><a href="#Vue-单向数据流" class="headerlink" title="Vue 单向数据流"></a>Vue 单向数据流</h1><p>所有的 prop 都使得其父子 prop 之间形成了一个单向下行绑定：父级 prop 的更新会向下流动到子组件中，但是反过来则不行。这样可以防止子组件意外改变父级组件的状态，从而导致应用的数据流向难以理解。每次父级组件发生更新时，子组件中所有的 prop 都将会刷新为最新的值。这意味着不应该在一个子组件内部改变 prop。如果你这样做了，Vue 会在浏览器的控制台中发出警告。子组件想修改时，只能通过 $emit 派发一个自定义事件，父组件接收到后，由父组件修改。</p>
<h1 id="Vue-生命周期"><a href="#Vue-生命周期" class="headerlink" title="Vue 生命周期"></a>Vue 生命周期</h1><p>beforeCreate：实例了Vue，但是还没进行数据的初始化和响应式处理；<br>created：数据已被初始化和响应式处理，在这里可以访问和修改数据；<br>beforeMount：render函数在这里被调用，生成虚拟DOM，但是还没转换成真实的DOM替换到el；<br>mounted：真实DOM挂载完毕；<br>beforeUpdate：数据更新之后，产生新的虚拟DOM，但是还没有和旧的虚拟DOM对比打补丁；<br>updated：新旧虚拟DOM对比完成，真实DOM更新；<br>beforeDestroy：实例销毁之前的操作，在这里数据还可以访问；<br>destroyed：实例销毁之后的操作，Vue所有的指令都被解绑，所有的事件监听器被移除，所有的子实例也被销毁。</p>
<h1 id="Vue-的父组件和子组件生命周期钩子函数执行顺序"><a href="#Vue-的父组件和子组件生命周期钩子函数执行顺序" class="headerlink" title="Vue 的父组件和子组件生命周期钩子函数执行顺序"></a>Vue 的父组件和子组件生命周期钩子函数执行顺序</h1><ul>
<li>加载渲染过程<br>父 beforeCreate -&gt; 父 created -&gt; 父 beforeMount -&gt; 子 beforeCreate -&gt; 子 created -&gt; 子 beforeMount -&gt; 子 mounted -&gt; 父 mounted</li>
<li>子组件更新过程<br>父 beforeUpdate -&gt; 子 beforeUpdate -&gt; 子 updated -&gt; 父 updated</li>
<li>父组件更新过程<br>父 beforeUpdate -&gt; 父 updated</li>
<li>销毁过程<br>父 beforeDestroy -&gt; 子 beforeDestroy -&gt; 子 destroyed -&gt; 父 destroyed</li>
</ul>
<h1 id="在哪个生命周期内调用异步请求"><a href="#在哪个生命周期内调用异步请求" class="headerlink" title="在哪个生命周期内调用异步请求"></a>在哪个生命周期内调用异步请求</h1><p>可以在钩子函数 created、beforeMount、mounted 中进行调用，因为在这三个钩子函数中，data 已经创建，可以将服务端端返回的数据进行赋值。但是推荐在 created 钩子函数中调用异步请求，因为在 created 钩子函数中调用异步请求有以下优点：</p>
<ul>
<li>能更快获取到服务端数据，减少页面 loading 时间；</li>
<li>ssr 不支持 beforeMount 、mounted 钩子函数，所以放在 created 中有助于一致性。</li>
</ul>
<h1 id="父组件如何监听子组件的生命周期"><a href="#父组件如何监听子组件的生命周期" class="headerlink" title="父组件如何监听子组件的生命周期"></a>父组件如何监听子组件的生命周期</h1><ul>
<li>$emit<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 父组件</span><br><span class="line">&lt;child @mounted&#x3D;&quot;doSomething&quot;&gt;</span><br><span class="line">&#x2F;&#x2F; 子组件</span><br><span class="line">mounted()&#123;</span><br><span class="line">    this.$emit(&#39;mounted&#39;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>@hook<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 父组件</span><br><span class="line">&lt;child @hook:mounted&#x3D;&quot;doSomething&quot;&gt;</span><br><span class="line">doSomething()&#123;</span><br><span class="line">    console.log(&#39;父组件监听到 mounted 钩子函数 ...&#39;);</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; 子组件</span><br><span class="line">mounted()&#123;</span><br><span class="line">   console.log(&#39;子组件触发 mounted 钩子函数 ...&#39;);</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; 打印顺序如下：</span><br><span class="line">&#x2F;&#x2F; 子组件触发 mounted 钩子函数 ...</span><br><span class="line">&#x2F;&#x2F; 父组件监听到 mounted 钩子函数 ...</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h1 id="Vue中hook的使用"><a href="#Vue中hook的使用" class="headerlink" title="Vue中hook的使用"></a>Vue中hook的使用</h1><p>hook可以用来监听组件的生命周期</p>
<ul>
<li>定时器<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 常用写法 - 需要定义全局变量timer</span><br><span class="line">data()&#123;</span><br><span class="line">    timer:null  </span><br><span class="line">&#125;,</span><br><span class="line">mounted()&#123;</span><br><span class="line">    this.timer &#x3D; setInterval(()&#x3D;&gt;&#123;&#125;,1000);</span><br><span class="line">&#125;</span><br><span class="line">beforeDestory()&#123;</span><br><span class="line">    clearInterval(this.timer);</span><br><span class="line">    this.timer &#x3D; null;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; 使用hook</span><br><span class="line">mounted()&#123;</span><br><span class="line">    this.timer &#x3D; setInterval(()&#x3D;&gt;&#123;&#125;,1000);</span><br><span class="line">    &#x2F;&#x2F; once - 监听事件，只触发一次</span><br><span class="line">    this.$once(&#39;hook:beforeDestroy&#39;,()&#x3D;&gt;&#123;</span><br><span class="line">        clearInterval(this.timer);</span><br><span class="line">        this.timer &#x3D; null;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>监听子组件的生命周期</li>
</ul>
<h1 id="组件通信方式"><a href="#组件通信方式" class="headerlink" title="组件通信方式"></a>组件通信方式</h1><h2 id="props-emit-父子组件"><a href="#props-emit-父子组件" class="headerlink" title="props / $emit - 父子组件"></a>props / $emit - 父子组件</h2><p>父组件通过v-bind向子组件传递数据，子组件通过props接收；<br>子组件通过$emit事件传递数据，父组件通过v-on绑定事件接收数据。</p>
<h2 id="ref-与-parent-children-父子组件"><a href="#ref-与-parent-children-父子组件" class="headerlink" title="ref 与 $parent / $children - 父子组件"></a>ref 与 $parent / $children - 父子组件</h2><p>ref：获取元素DOM，但是如果是组件的话，获取的是组件的实例，拿到子组件的数据；<br>$parent / $children：访问 父 / 子 组件实例。</p>
<h2 id="EventBus-emit-on-父子、兄弟、隔代组件"><a href="#EventBus-emit-on-父子、兄弟、隔代组件" class="headerlink" title="EventBus($emit / $on) - 父子、兄弟、隔代组件"></a>EventBus($emit / $on) - 父子、兄弟、隔代组件</h2><p>通过一个空的Vue实例作为中央事件总线实现数据通讯，$emit发送事件，$on接受监听事件，具体使用如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 在utils文件夹下面新建一个eventBus.js文件，内容如下：</span><br><span class="line">import Vue from vue</span><br><span class="line">export default new Vue()</span><br><span class="line">&#x2F;&#x2F; 父组件</span><br><span class="line">import eventVue from &#39;@&#x2F;utils&#x2F;eventBus&#39;</span><br><span class="line">eventVue.$emit(&#39;passEvent&#39;,data)</span><br><span class="line">&#x2F;&#x2F; 子组件</span><br><span class="line">import eventVue from &#39;@&#x2F;utils&#x2F;eventBus&#39;</span><br><span class="line">eventVue.$on(&#39;passEvent&#39;,(data)&#x3D;&gt;&#123;&#125;)</span><br><span class="line">&#x2F;&#x2F; 移除事件监听</span><br><span class="line">import eventVue from &#39;@&#x2F;utils&#x2F;eventBus&#39;</span><br><span class="line">eventVue.$off(&#39;passEvent&#39;, &#123;&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="provide-inject-隔代组件"><a href="#provide-inject-隔代组件" class="headerlink" title="provide / inject - 隔代组件"></a>provide / inject - 隔代组件</h2><p>父组件通过provide提供变量，子孙组件通过inject注入变量。</p>
<h2 id="attrs-listeners-隔代组件"><a href="#attrs-listeners-隔代组件" class="headerlink" title="$attrs / $listeners - 隔代组件"></a>$attrs / $listeners - 隔代组件</h2><p>父组件中通过v-bind绑定的传给子孙组件的属性，如果没有被子孙组件通过props接收，就会被绑定到$attrs上，实例如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 父组件</span><br><span class="line">&lt;child1 :name&#x3D;&quot;name&quot; :age&#x3D;&quot;age&quot; height&#x3D;&quot;170cm&quot;&gt;&lt;&#x2F;child&gt;</span><br><span class="line">data()&#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        name:&#39;Nacy&#39;</span><br><span class="line">        age:18</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; 子组件</span><br><span class="line">&lt;child2 v-bind&#x3D;&quot;$attrs&quot;&gt;&lt;&#x2F;child2&gt;</span><br><span class="line">&#x2F;&#x2F; inheritAttrs:false, &#x2F;&#x2F; 没有在props声明的属性会自动挂载到组件根元素上的，设置成false可以关闭这一自动行为</span><br><span class="line">props:&#123;</span><br><span class="line">    name:String</span><br><span class="line">&#125;</span><br><span class="line">create()&#123;</span><br><span class="line">    console.log(this.$attrs)</span><br><span class="line">    &#x2F;&#x2F; &#123;age:18,height:&#39;170cm&#39;&#125; 由于name被props接收，所以这里没有name属性</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; 孙组件</span><br><span class="line">&#x2F;&#x2F; inheritAttrs: false,</span><br><span class="line">props: &#123;</span><br><span class="line">    age: Number</span><br><span class="line">&#125;,</span><br><span class="line">created() &#123;</span><br><span class="line">    console.log(this.$attrs); </span><br><span class="line">    &#x2F;&#x2F; &#123; height:&#39;170cm&#39; &#125; age被props接收，所以这里没有age属性</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="localStorage-sessionStorage-父子、兄弟、隔代组件"><a href="#localStorage-sessionStorage-父子、兄弟、隔代组件" class="headerlink" title="localStorage / sessionStorage - 父子、兄弟、隔代组件"></a>localStorage / sessionStorage - 父子、兄弟、隔代组件</h2><p>将数据保存在浏览器中，随取随用，但是数据格式、大小等受限。</p>
<h2 id="Vuex-父子、兄弟、隔代组件"><a href="#Vuex-父子、兄弟、隔代组件" class="headerlink" title="Vuex - 父子、兄弟、隔代组件"></a>Vuex - 父子、兄弟、隔代组件</h2><p>状态管理，解决localStorage / sessionStorage的痛脚。</p>
<h1 id="provide-和-inject-的数据是响应式的吗"><a href="#provide-和-inject-的数据是响应式的吗" class="headerlink" title="provide 和 inject 的数据是响应式的吗"></a>provide 和 inject 的数据是响应式的吗</h1><p>官方解释：不是响应式的，因为使用了<code>shouldObserve = false</code>告诉defineReactive函数仅仅是把键值添加到当前实例上但是不需要将其转换成响应式。但是，要想实现响应也可以，使用对象或者函数返回值就可以实现响应：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 父组件</span><br><span class="line">data()&#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        name:&#39;XX&#39;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">provide()&#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        name:this.name &#x2F;&#x2F; 基本数据类型，不会响应</span><br><span class="line">        &#x2F;&#x2F; name:() &#x3D;&gt; this.name &#x2F;&#x2F; 函数返回值，会响应</span><br><span class="line">        &#x2F;&#x2F; name:&#123;newName:this.name&#125; &#x2F;&#x2F; 对象，会响应</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; 子组件</span><br><span class="line">inject:[&#39;name&#39;]</span><br></pre></td></tr></table></figure>

<h1 id="自定义指令"><a href="#自定义指令" class="headerlink" title="自定义指令"></a>自定义指令</h1><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 局部注册</span><br><span class="line">directives:&#123;</span><br><span class="line">    focus:&#123;</span><br><span class="line">        &#x2F;&#x2F; 只调用一次，指令第一次绑定到元素时调用</span><br><span class="line">        bind(el,binding,vnode,oldVnode)&#123;&#125;,</span><br><span class="line">        &#x2F;&#x2F; 当被绑定的元素插入到 DOM 中时调用</span><br><span class="line">        inserted()&#123;&#125;,</span><br><span class="line">        &#x2F;&#x2F; 所在组件的 VNode 更新时调用</span><br><span class="line">        update()&#123;&#125;,</span><br><span class="line">        &#x2F;&#x2F; 指令所在组件的 VNode 及其子 VNode 全部更新后调用</span><br><span class="line">        componentUpdated()&#123;&#125;,</span><br><span class="line">        &#x2F;&#x2F; 只调用一次，指令与元素解绑时调用。</span><br><span class="line">        unbind()&#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; 全局注册</span><br><span class="line">Vue.directive(&#39;focus&#39;, &#123;</span><br><span class="line">    inserted()&#123;&#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>el：指令所绑定的元素，可以用来直接操作 DOM；</li>
<li>binding：一个对象，包含以下 property：<ul>
<li>name：指令名，不包括 v- 前缀。</li>
<li>value：指令的绑定值，例如：v-my-directive=”1 + 1” 中，绑定值为 2。</li>
<li>oldValue：指令绑定的前一个值，仅在 update 和 componentUpdated 钩子中可用。无论值是否改变都可用。</li>
<li>expression：字符串形式的指令表达式。例如 v-my-directive=”1 + 1” 中，表达式为 “1 + 1”。</li>
<li>arg：传给指令的参数，可选。例如 v-my-directive:foo 中，参数为 “foo”。</li>
<li>modifiers：一个包含修饰符的对象。例如：v-my-directive.foo.bar 中，修饰符对象为 { foo: true, bar: true }。</li>
</ul>
</li>
<li>vnode：Vue 编译生成的虚拟节点。</li>
<li>oldVnode：上一个虚拟节点，仅在 update 和 componentUpdated 钩子中可用。</li>
</ul>
<h2 id="v-waterMark-水印"><a href="#v-waterMark-水印" class="headerlink" title="v-waterMark - 水印"></a>v-waterMark - 水印</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * 水印自定义指令</span><br><span class="line"> * v-waterMark&#x3D;&#123;text,font,textColor,canWidth,canHeight&#125;</span><br><span class="line"> * text 必须 水印文字</span><br><span class="line"> * font 非必须 水印字体样式</span><br><span class="line"> * textColor 非必须 水印颜色</span><br><span class="line"> * canWidth 非必须 画布宽度</span><br><span class="line"> * canHeight 非必须 画布高度</span><br><span class="line"> *&#x2F;</span><br><span class="line">export default const waterMark &#x3D; &#123;</span><br><span class="line">  bind: function(el, &#123; value &#125;) &#123;</span><br><span class="line">    if (!value.text) throw new Error(&#39;水印内容text必传&#39;)</span><br><span class="line">    &#x2F;&#x2F; 新建画布</span><br><span class="line">    var can &#x3D; document.createElement(&#39;canvas&#39;)</span><br><span class="line">    el.appendChild(can)</span><br><span class="line">    &#x2F;&#x2F; 画布宽高</span><br><span class="line">    can.width &#x3D; value.canWidth || 200</span><br><span class="line">    can.height &#x3D; value.canHeight || 150</span><br><span class="line">    can.style.display &#x3D; &#39;none&#39;</span><br><span class="line">    var cans &#x3D; can.getContext(&#39;2d&#39;)</span><br><span class="line">    cans.rotate((-20 * Math.PI) &#x2F; 180)</span><br><span class="line">    &#x2F;&#x2F; 水印字体样式</span><br><span class="line">    cans.font &#x3D; value.font || &#39;16px Microsoft JhengHei&#39;</span><br><span class="line">    &#x2F;&#x2F; 水印颜色</span><br><span class="line">    cans.fillStyle &#x3D; value.textColor || &#39;rgba(180, 180, 180, 0.3)&#39;</span><br><span class="line">    cans.textAlign &#x3D; &#39;left&#39;</span><br><span class="line">    cans.textBaseline &#x3D; &#39;Middle&#39;</span><br><span class="line">    cans.fillText(value.text, can.width &#x2F; 10, can.height &#x2F; 2)</span><br><span class="line">    el.style.backgroundImage &#x3D; &#39;url(&#39; + can.toDataURL(&#39;image&#x2F;png&#39;) + &#39;)&#39;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="v-hasPermi-操作权限"><a href="#v-hasPermi-操作权限" class="headerlink" title="v-hasPermi - 操作权限"></a>v-hasPermi - 操作权限</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">import store from &#39;@&#x2F;store&#39;</span><br><span class="line">export default const hasPermi &#x3D; &#123;</span><br><span class="line">  inserted(el, &#123; value &#125;, vnode) &#123;</span><br><span class="line">    const all_permission &#x3D; &quot;*:*:*&quot;;</span><br><span class="line">    &#x2F;&#x2F; 从Vuex中取出所有的权限，如果是管理员[&quot;*:*:*&quot;]，如果是普通用户[&quot;system:user:resetPwd&quot;,&quot;tool:gen:import&quot;......]</span><br><span class="line">    const permissions &#x3D; store.getters &amp;&amp; store.getters.permissions</span><br><span class="line"></span><br><span class="line">    if (value &amp;&amp; value instanceof Array &amp;&amp; value.length &gt; 0) &#123;</span><br><span class="line">      const permissionFlag &#x3D; value</span><br><span class="line"></span><br><span class="line">      const hasPermissions &#x3D; permissions.some(permission &#x3D;&gt; &#123;</span><br><span class="line">        return all_permission &#x3D;&#x3D;&#x3D; permission || permissionFlag.includes(permission)</span><br><span class="line">      &#125;)</span><br><span class="line">      &#x2F;&#x2F; 没有权限，移除DOM</span><br><span class="line">      if (!hasPermissions) &#123;</span><br><span class="line">        el.parentNode &amp;&amp; el.parentNode.removeChild(el)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      throw new Error(&#96;请设置操作权限标签值&#96;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; 使用</span><br><span class="line">&lt;el-button v-hasPermi&#x3D;&quot;[&#39;system:menu:edit&#39;]&quot;&gt;修改&lt;&#x2F;el-button&gt;</span><br></pre></td></tr></table></figure>
<h2 id="v-hasRole-角色权限"><a href="#v-hasRole-角色权限" class="headerlink" title="v-hasRole - 角色权限"></a>v-hasRole - 角色权限</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">import store from &#39;@&#x2F;store&#39;</span><br><span class="line">export default const hasRole &#x3D; &#123;</span><br><span class="line">  inserted(el, &#123; value &#125;, vnode) &#123;</span><br><span class="line">    const super_admin &#x3D; &quot;admin&quot;;</span><br><span class="line">    &#x2F;&#x2F; 从Vuex里面取出角色，管理员[&quot;admin&quot;]，普通用户[&quot;common&quot;]</span><br><span class="line">    const roles &#x3D; store.getters &amp;&amp; store.getters.roles</span><br><span class="line"></span><br><span class="line">    if (value &amp;&amp; value instanceof Array &amp;&amp; value.length &gt; 0) &#123;</span><br><span class="line">      const roleFlag &#x3D; value</span><br><span class="line"></span><br><span class="line">      const hasRole &#x3D; roles.some(role &#x3D;&gt; &#123;</span><br><span class="line">        return super_admin &#x3D;&#x3D;&#x3D; role || roleFlag.includes(role)</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">      if (!hasRole) &#123;</span><br><span class="line">        el.parentNode &amp;&amp; el.parentNode.removeChild(el)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      throw new Error(&#96;请设置角色权限标签值&quot;&#96;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; 使用</span><br><span class="line">&lt;el-button v-hasRole&#x3D;&quot;[&#39;common&#39;]&quot;&gt;修改&lt;&#x2F;el-button&gt;</span><br></pre></td></tr></table></figure>

<h1 id="动态指令-amp-动态参数"><a href="#动态指令-amp-动态参数" class="headerlink" title="动态指令 &amp; 动态参数"></a>动态指令 &amp; 动态参数</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @[someEvent]&#x3D;&quot;handleSomeEvent()&quot; :[someProps]&#x3D;&quot;1000&quot; &#x2F;&gt;...</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  data()&#123;</span><br><span class="line">    return&#123;</span><br><span class="line">      someEvent: someCondition ? &quot;click&quot; : &quot;dbclick&quot;,</span><br><span class="line">      someProps: someCondition ? &quot;num&quot; : &quot;price&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    handleSomeEvent()&#123;</span><br><span class="line">      &#x2F;&#x2F; handle some event</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;  </span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h1 id="Vuex"><a href="#Vuex" class="headerlink" title="Vuex"></a>Vuex</h1><p>Vuex原理就是利用全局混入mixin，将所创建的store对象，混入到每一个Vue实例里面。<br>代码简单实现：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Vue.use(xxx)会执行xxx的install方法，方法入参就是Vue</span><br><span class="line">const install &#x3D; (vue) &#x3D;&gt; &#123;</span><br><span class="line">    &#x2F;&#x2F; 全局混入</span><br><span class="line">    vue.mixin(&#123;</span><br><span class="line">        beforeCreate() &#123;</span><br><span class="line">            if (this.$options &amp;&amp; this.$options.store) &#123;</span><br><span class="line">                &#x2F;&#x2F; 根页面，直接将身上的store赋值给自己的$store，</span><br><span class="line">                这也解释了为什么使用vuex要先把store放到入口文件main.js里的根Vue实例里</span><br><span class="line">                this.$store &#x3D; this.$options.store;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                &#x2F;&#x2F; 除了根页面以外，将上级的$store赋值给自己的$store</span><br><span class="line">                this.$store &#x3D; this.$parent &amp;&amp; this.$parent.$store;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; 创建类Store</span><br><span class="line">class Store &#123;</span><br><span class="line">    constructor(options) &#123; &#x2F;&#x2F; options接收传入的store对象</span><br><span class="line">        this.vm &#x3D; new Vue(&#123;</span><br><span class="line">            &#x2F;&#x2F; 确保state是响应式</span><br><span class="line">            data: &#123;</span><br><span class="line">                state: options.state</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        &#x2F;&#x2F; getter</span><br><span class="line">        let getters &#x3D; options.getters || &#123;&#125;;</span><br><span class="line">        this.getters &#x3D; &#123;&#125;;</span><br><span class="line">        console.log(Object.keys(this.getters))</span><br><span class="line">        Object.keys(getters).forEach(getterName &#x3D;&gt; &#123;</span><br><span class="line">            Object.defineProperty(this.getters, getterName, &#123;</span><br><span class="line">                get: () &#x3D;&gt; &#123;</span><br><span class="line">                    return getters[getterName](this.state);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">        &#x2F;&#x2F; mutation</span><br><span class="line">        let mutations &#x3D; options.mutations || &#123;&#125;;</span><br><span class="line">        this.mutations &#x3D; &#123;&#125;;</span><br><span class="line">        Object.keys(mutations).forEach(mutationName &#x3D;&gt; &#123;</span><br><span class="line">            this.mutations[mutationName] &#x3D; payload &#x3D;&gt; &#123;</span><br><span class="line">                mutations[mutationName](this.state, payload);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        &#x2F;&#x2F; action</span><br><span class="line">        let actions &#x3D; options.actions || &#123;&#125;;</span><br><span class="line">        this.actions &#x3D; &#123;&#125;;</span><br><span class="line">        Object.keys(actions).forEach(actionName &#x3D;&gt; &#123;</span><br><span class="line">            this.actions[actionName] &#x3D; payload &#x3D;&gt; &#123;</span><br><span class="line">                actions[actionName](this.state, payload);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F; 获取state时，直接返回</span><br><span class="line">    get state() &#123;</span><br><span class="line">        return this.vm.state;</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F; commit方法，执行mutations的&#39;name&#39;方法</span><br><span class="line">    commit(name, payload) &#123;</span><br><span class="line">        this.mutations[name](payload);</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F; dispatch方法，执行actions的&#39;name&#39;方法</span><br><span class="line">    dispatch(name, payload) &#123;</span><br><span class="line">        this.actions[name](payload);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 把install方法和类Store暴露出去</span><br><span class="line">export default &#123;</span><br><span class="line">    install,</span><br><span class="line">    Store</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="vue-router"><a href="#vue-router" class="headerlink" title="vue-router"></a>vue-router</h1><p>vue-router使用三步骤：</p>
<ol>
<li>引入vue-router，并使用Vue.use(VueRouter)：<br>定义一个VueRouter类，并定义install方法，因为Vue.use(xxx)就是执行xxx的install方法。在install方法中，利用Vue的全局混入，将router绑定到每一个Vue实例上，并执行初始化操作。</li>
<li>定义路由数组，并将数组传入VueRouter实例，并将实例暴露出去；<br>定义路由数组的map，key是path，value是对应的组件信息；<br>定义路由模式mode，不同的模式对应不同的方法；<br>根据路由map值和理由模式进行组件渲染；<br>router-link实际上是a标签；<br>router-view使用渲染函数的h函数对组件进行渲染。</li>
<li>将VueRouter实例引入到main.js，并注册到根Vue实例上</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import VueRouter from &#39;vue-router&#39;</span><br><span class="line"></span><br><span class="line">Vue.use(VueRouter) &#x2F;&#x2F; 第一步</span><br><span class="line"></span><br><span class="line">export default new VueRouter(&#123; &#x2F;&#x2F; 传入的options</span><br><span class="line">    routes &#x2F;&#x2F; 第二步</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">import router from &#39;.&#x2F;router&#39;</span><br><span class="line"></span><br><span class="line">new Vue(&#123;</span><br><span class="line">  router,  &#x2F;&#x2F; 第三步</span><br><span class="line">  render: h &#x3D;&gt; h(App)</span><br><span class="line">&#125;).$mount(&#39;#app&#39;)</span><br></pre></td></tr></table></figure>
<p>详情参考：<a href="https://juejin.cn/post/7012272146907037732" target="_blank" rel="noopener">7张图，从零实现一个简易版Vue-Router，太通俗易懂了！</a></p>
<h1 id="项目内存泄漏"><a href="#项目内存泄漏" class="headerlink" title="项目内存泄漏"></a>项目内存泄漏</h1><p>项目在运行或者打包的时候报错：javascript heap out of memory，即内存泄漏，为了解决这个问题，需要扩展该项目的内存。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; package.json</span><br><span class="line">&quot;script&quot;:&#123;</span><br><span class="line">    &#x2F;&#x2F; &quot;dev&quot;: &quot;vue-cli-service serve&quot;,</span><br><span class="line">    &#x2F;&#x2F; &quot;build&quot;: &quot;vue-cli-service build&quot;,</span><br><span class="line">    &quot;dev&quot;: &quot;node --max_old_space_size&#x3D;4096 node_modules&#x2F;.bin&#x2F;vue-cli-service serve&quot;,</span><br><span class="line">    &quot;build&quot;: &quot;node --max_old_space_size&#x3D;4096 node_modules&#x2F;.bin&#x2F;vue-cli-service build&quot;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其他解决方法：详情请看<a href="https://blog.csdn.net/lucky_Zeng/article/details/108622002" target="_blank" rel="noopener">安装插件解决内存泄漏</a></p>
<h1 id="组件的二次封装"><a href="#组件的二次封装" class="headerlink" title="组件的二次封装"></a>组件的二次封装</h1><p><strong>问题：</strong>在Vue项目中使用element UI组件，虽然组件十分便捷，但是在开发过程中往往需要对组件进行二次封装。以表格el-table组件为例，该组件属性很多，如果对其进行封装，在实际使用过程中需要将该组件的属性一个一个通过props接收，十分繁琐。</p>
<p><strong>解决方法：</strong><code>$attrs</code>和<code>$listeners</code>，通过这两个属性可以实现隔代组件的通信，父组件中传递给子孙组件的数据如果没有被</p>

    </div>

    
    
    
    
    
      <div>
          <div>
    
        <div style="text-align:center;color: #666;font-size:14px;">-------------本文结束　<i class="fa fa-hourglass-end" style="color:rgb(90,85,85)"></i>　感谢阅读-------------</div>
    
</div>
      </div>
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>Crystal
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://crystalsummer.gitee.io/2019/11/17/Vue2%EF%BC%88%E4%BA%8C%EF%BC%89/" title="Vue2（二）">http://crystalsummer.gitee.io/2019/11/17/Vue2（二）/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/Vue/" rel="tag"><i class="fa fa-tag"></i> Vue</a>
              <a href="/tags/%E5%8E%9F%E7%90%86/" rel="tag"><i class="fa fa-tag"></i> 原理</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2019/10/09/Vue2%EF%BC%88%E4%B8%80%EF%BC%89/" rel="prev" title="Vue2（一）">
      <i class="fa fa-chevron-left"></i> Vue2（一）
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/01/24/Vue%E9%A1%B9%E7%9B%AE%E6%A1%86%E6%9E%B6%E9%85%8D%E7%BD%AE/" rel="next" title="Vue项目框架配置">
      Vue项目框架配置 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    
  <div class="comments">
    <div id="lv-container" data-id="city" data-uid="MTAyMC81MDEyMC8yNjYxMA"></div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#v-model原理"><span class="nav-number">1.</span> <span class="nav-text">v-model原理</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Vue-不常用指令"><span class="nav-number">2.</span> <span class="nav-text">Vue 不常用指令</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Vue-修饰符"><span class="nav-number">3.</span> <span class="nav-text">Vue 修饰符</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#表单修饰符"><span class="nav-number">3.1.</span> <span class="nav-text">表单修饰符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#事件修饰符"><span class="nav-number">3.2.</span> <span class="nav-text">事件修饰符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#按键修饰符"><span class="nav-number">3.3.</span> <span class="nav-text">按键修饰符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#鼠标按钮修饰符"><span class="nav-number">3.4.</span> <span class="nav-text">鼠标按钮修饰符</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#v-if-和-v-show"><span class="nav-number">4.</span> <span class="nav-text">v-if 和 v-show</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#v-for-和-v-if-不建议一起使用的原因"><span class="nav-number">5.</span> <span class="nav-text">v-for 和 v-if 不建议一起使用的原因</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#class-和-style-的动态绑定"><span class="nav-number">6.</span> <span class="nav-text">class 和 style 的动态绑定</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#为什么data是个函数并且返回一个对象"><span class="nav-number">7.</span> <span class="nav-text">为什么data是个函数并且返回一个对象</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#如何获取data的初始值"><span class="nav-number">8.</span> <span class="nav-text">如何获取data的初始值</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#如何定义不需要响应的数据"><span class="nav-number">9.</span> <span class="nav-text">如何定义不需要响应的数据</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#computed如何实现传参"><span class="nav-number">10.</span> <span class="nav-text">computed如何实现传参</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Vue-单向数据流"><span class="nav-number">11.</span> <span class="nav-text">Vue 单向数据流</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Vue-生命周期"><span class="nav-number">12.</span> <span class="nav-text">Vue 生命周期</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Vue-的父组件和子组件生命周期钩子函数执行顺序"><span class="nav-number">13.</span> <span class="nav-text">Vue 的父组件和子组件生命周期钩子函数执行顺序</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#在哪个生命周期内调用异步请求"><span class="nav-number">14.</span> <span class="nav-text">在哪个生命周期内调用异步请求</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#父组件如何监听子组件的生命周期"><span class="nav-number">15.</span> <span class="nav-text">父组件如何监听子组件的生命周期</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Vue中hook的使用"><span class="nav-number">16.</span> <span class="nav-text">Vue中hook的使用</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#组件通信方式"><span class="nav-number">17.</span> <span class="nav-text">组件通信方式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#props-emit-父子组件"><span class="nav-number">17.1.</span> <span class="nav-text">props &#x2F; $emit - 父子组件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ref-与-parent-children-父子组件"><span class="nav-number">17.2.</span> <span class="nav-text">ref 与 $parent &#x2F; $children - 父子组件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#EventBus-emit-on-父子、兄弟、隔代组件"><span class="nav-number">17.3.</span> <span class="nav-text">EventBus($emit &#x2F; $on) - 父子、兄弟、隔代组件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#provide-inject-隔代组件"><span class="nav-number">17.4.</span> <span class="nav-text">provide &#x2F; inject - 隔代组件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#attrs-listeners-隔代组件"><span class="nav-number">17.5.</span> <span class="nav-text">$attrs &#x2F; $listeners - 隔代组件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#localStorage-sessionStorage-父子、兄弟、隔代组件"><span class="nav-number">17.6.</span> <span class="nav-text">localStorage &#x2F; sessionStorage - 父子、兄弟、隔代组件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Vuex-父子、兄弟、隔代组件"><span class="nav-number">17.7.</span> <span class="nav-text">Vuex - 父子、兄弟、隔代组件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#provide-和-inject-的数据是响应式的吗"><span class="nav-number">18.</span> <span class="nav-text">provide 和 inject 的数据是响应式的吗</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#自定义指令"><span class="nav-number">19.</span> <span class="nav-text">自定义指令</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#使用"><span class="nav-number">19.1.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#v-waterMark-水印"><span class="nav-number">19.2.</span> <span class="nav-text">v-waterMark - 水印</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#v-hasPermi-操作权限"><span class="nav-number">19.3.</span> <span class="nav-text">v-hasPermi - 操作权限</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#v-hasRole-角色权限"><span class="nav-number">19.4.</span> <span class="nav-text">v-hasRole - 角色权限</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#动态指令-amp-动态参数"><span class="nav-number">20.</span> <span class="nav-text">动态指令 &amp; 动态参数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Vuex"><span class="nav-number">21.</span> <span class="nav-text">Vuex</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#vue-router"><span class="nav-number">22.</span> <span class="nav-text">vue-router</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#项目内存泄漏"><span class="nav-number">23.</span> <span class="nav-text">项目内存泄漏</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#组件的二次封装"><span class="nav-number">24.</span> <span class="nav-text">组件的二次封装</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Crystal"
      src="/uploads/avatar2.png">
  <p class="site-author-name" itemprop="name">Crystal</p>
  <div class="site-description" itemprop="description">Only for recording life</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">35</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">27</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">27</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/crystal-summer" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;crystal-summer" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:herr_510@163.com" title="E-Mail → mailto:herr_510@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/5596982190/profile?rightmod=1&wvr=6&mod=personnumber&is_all=1" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;5596982190&#x2F;profile?rightmod&#x3D;1&amp;wvr&#x3D;6&amp;mod&#x3D;personnumber&amp;is_all&#x3D;1" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://www.ruanyifeng.com/blog/" title="http:&#x2F;&#x2F;www.ruanyifeng.com&#x2F;blog&#x2F;" rel="noopener" target="_blank">阮一峰</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://juejin.im/" title="https:&#x2F;&#x2F;juejin.im&#x2F;" rel="noopener" target="_blank">掘金</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://developer.mozilla.org/zh-CN/" title="https:&#x2F;&#x2F;developer.mozilla.org&#x2F;zh-CN&#x2F;" rel="noopener" target="_blank">MDN</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.zhangxinxu.com/" title="https:&#x2F;&#x2F;www.zhangxinxu.com&#x2F;" rel="noopener" target="_blank">张鑫旭</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://codepen.io/" title="https:&#x2F;&#x2F;codepen.io&#x2F;" rel="noopener" target="_blank">CodePen</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.nowcoder.com/" title="https:&#x2F;&#x2F;www.nowcoder.com&#x2F;" rel="noopener" target="_blank">牛客</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.dandyweng.com/" title="https:&#x2F;&#x2F;www.dandyweng.com&#x2F;" rel="noopener" target="_blank">翁天信</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2019 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Crystal Summer</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">479k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">7:16</span>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script color='34,34,34' opacity='0.5' zIndex='' count='99' src="/lib/canvas-nest/canvas-nest-nomobile.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdn.bootcss.com/fancybox/3.5.7/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

<script>
NexT.utils.loadComments(document.querySelector('#lv-container'), () => {
  window.livereOptions = {
    refer: location.pathname.replace(CONFIG.root, '').replace('index.html', '')
  };
  (function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
  })(document, 'script');
});
</script>

</body>
</html>
